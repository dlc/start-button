!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=466)}({11:function(e,t,n){"use strict";t.a={"agenocrm.com":{url:"*://*.agenocrm.com/*",name:"AgenoCRM",file:"minicrm.js"},"airtable.com":{url:"*://airtable.com/*",name:"Airtable"},"any.do":{url:"*://*.any.do/*",name:"Anydo"},"app.asana.com":{url:"*://app.asana.com/*",name:"Asana"},"assembla.com":{url:"*://*.assembla.com/*",name:"Assembla"},"atlassian.com":{url:"*://*.atlassian.com/*",name:"Atlassian / Jira",file:"atlassian.js"},"atlassian.net":{url:"*://*.atlassian.net/*",name:"Atlassian / Jira",clone:"true",file:"atlassian.js"},"attask-ondemand.com":{url:"*://*.attask-ondemand.com/*",name:"Workfront",clone:"true"},"axosoft.com":{url:"*://*.axosoft.com/*",name:"Axosoft"},"backlog.jp":{url:"*://*.backlog.jp/*",name:"Backlog"},"basecamp.com":{url:"*://*.basecamp.com/*",name:"Basecamp"},"basecamphq.com":{url:"*://*.basecamphq.com/*",name:"BasecampHQ",clone:"true",file:"basecamp.js"},"bitbucket.org":{url:"*://*.bitbucket.org/*",name:"Bitbucket"},"bitrix24.com":{url:"*://*.bitrix24.com/*",name:"Bitrix24"},"app.breeze.pm":{url:"*://app.breeze.pm/*",name:"Breeze"},"app.brokerengine.com.au":{url:"*://app.brokerengine.com.au/*",name:"BrokerEngine"},"bugherd.com":{url:"*://*.bugherd.com/*",name:"BugHerd",file:"bugherd.js"},"app.bugsnag.com":{url:"*://app.bugsnag.com/*",name:"Bugsnag"},"bugzilla.mozilla.org":{url:"*://bugzilla.mozilla.org/*",name:"Bugzilla"},"capsulecrm.com":{url:"*://*.capsulecrm.com/*",name:"CapsuleCRM"},"clickup.com":{url:"*://*.clickup.com/*",name:"ClickUp"},"cloudes.me":{url:"*://*.cloudes.me/*",name:"Cloudes.me"},"app.clubhouse.io":{url:"*://app.clubhouse.io/*",name:"Clubhouse"},"app.codeable.io":{url:"*://app.codeable.io/*",name:"Codeable"},"codebasehq.com":{url:"*://*.codebasehq.com/*",name:"Codebase"},"corgee.com":{url:"*://*.corgee.com/*",name:"Corgee"},"desk.com":{url:"*://*.desk.com/web/agent/*",name:"Desk.com"},"devdocs.io":{url:"*://devdocs.io/*",name:"Devdocs.io"},"dobambam.com":{url:"*://*.dobambam.com/*",name:"Dobambam"},"doit.im":{url:"*://*.doit.im/*",name:"Doit"},"doitim.com":{url:"*://*.doitim.com/*",name:"Doit",clone:"true"},"dokuwiki.org":{url:"*://*.dokuwiki.org/*",name:"DokuWiki",file:"dokuwiki.js"},"dom-integration":{url:"*://toggl-button-dom-demo.now.sh/*",name:"DOM Integration"},"draftin.com":{url:"*://*.draftin.com/*",name:"Draftin"},"paper.dropbox.com":{url:"*://paper.dropbox.com/*",name:"Dropbox Paper"},"drupal.org":{url:"*://*.drupal.org/*",name:"Drupal"},"dynamics.com":{url:"*://*.dynamics.com/*",name:"Dynamics 365"},"eproject.me":{url:"*://*.eproject.me/*",name:"Eproject.me"},"esa.io":{url:"*://*.esa.io/*",name:"Esa.io"},eventum:{url:"",name:"Eventum"},"evernote.com":{url:"*://*.evernote.com/*",name:"Evernote"},"exana.io":{url:"*://*.exana.io/*",name:"Phabricator"},"feedly.com":{url:"*://*.feedly.com/*",name:"Feedly"},"fibery.io":{url:"*://*.fibery.io/*",name:"Fibery"},"focuster.com":{url:"*://*.focuster.com/*",name:"Focuster"},"fogbugz.com":{url:"*://*.fogbugz.com/*",name:"Fogbugz"},"freshdesk.com":{url:"*://*.freshdesk.com/*",name:"Freshdesk"},"getflow.com":{url:"*://*.getflow.com/*",name:"Getflow"},"gingkoapp.com":{url:"*://gingkoapp.com/*",name:"Gingkoapp"},"gitea.com":{url:"*://gitea.com/*",name:"Gitea"},"github.com":{url:"*://github.com/*",name:"Github"},"gitlab.com":{url:"*://*.gitlab.com/*",name:"Gitlab"},"gogs.io":{url:"*://*.gogs.io/*",name:"Gogs"},"calendar.google.com":{url:"*://calendar.google.com/*",name:"Google Calendar"},"classroom.google.com":{url:"*://classroom.google.com/*",name:"Google Classroom"},"docs.google.com":{url:"*://docs.google.com/*",name:"Google Docs"},"inbox.google.com":{url:"*://inbox.google.com/*",name:"Google Inbox"},"keep.google.com":{url:"*://keep.google.com/*",name:"Google Keep"},"khanacademy.org":{url:"*://*.khanacademy.org/*",name:"KhanAcademy",file:"khanacademy.js"},"mail.google.com":{url:"*://mail.google.com/*",name:"Google Mail"},"gqueues.com":{url:"*://*.gqueues.com/*",name:"GQueues",file:"gqueues.js"},"habitica.com":{url:"*://habitica.com/*",name:"Habitica"},"app.heflo.com":{url:"*://app.heflo.com/*",name:"HEFLO"},"helprace.com":{url:"*://*.helprace.com/*",name:"Helprace"},"secure.helpscout.net":{url:"*://secure.helpscout.net/*",name:"Helpscout"},"app.huskymarketingplanner.com":{url:"*://app.huskymarketingplanner.com/*",name:"Husky Marketing Planner",file:"husky-marketing-planner.js"},"intercom.com":{url:"*://*.intercom.com/*",name:"Intercom"},"jira.com":{url:"*://*.jira.com/*",name:"Jira",file:"atlassian.js"},"bugs.jquery.com":{url:"*://bugs.jquery.com/*",name:"Jquery Bugs",file:"trac.js"},"kanbanery.com":{url:"*://*.kanbanery.com/*",name:"Kanbanery"},"kanboard.net":{url:"",name:"Kanboard"},"kanban.ist":{url:"*://*.kanban.ist/*",name:"Kanbanist"},"kantree.io":{url:"*://*.kantree.io/*",name:"Kantree"},"app.liquidplanner.com":{url:"*://app.liquidplanner.com/*",name:"Liquidplanner"},"ladesk.com":{url:"*://*.ladesk.com/*",name:"LiveAgent",file:"liveagent.js"},"mantishub.com":{url:"*://*.mantishub.com/*",name:"Mantishub"},"mantishub.io":{url:"*://*.mantishub.io/*",name:"Mantishub",clone:"true"},"meistertask.com":{url:"*://*.meistertask.com/*",name:"MeisterTask",file:"meistertask.js"},"minicrm.pl":{url:"*://*.minicrm.pl/*",name:"Minicrm",clone:"true"},"myjetbrains.com":{url:"*://*.myjetbrains.com/*",name:"YouTrack",file:"youtrack.js"},"newsletter2go.com":{url:"*://*.newsletter2go.com/*",name:"Newsletter2go"},"notion.so":{url:"*://*.notion.so/*",name:"Notion",file:"notion.js"},"app.nozbe.com":{url:"*://app.nozbe.com/*",name:"Nozbe"},"odoo.com":{url:"*://*.odoo.com/*",name:"Odoo"},"ongemini.com":{url:"*://*.ongemini.com/*",name:"Gemini"},"openproject.com":{url:"*://*.openproject.com/*",name:"Openproject"},"onlyoffice.com":{url:"*://*.onlyoffice.com/*",name:"OnlyOffice"},"onlyoffice.eu":{url:"*://*.onlyoffice.eu/*",name:"OnlyOffice",clone:"true"},"onshape.com":{url:"*://*.onshape.com/*",name:"Onshape"},"supportsystem.com":{url:"*://*.supportsystem.com/*",name:"osTicket",file:"osticket.js"},"outlook.office.com":{url:"*://outlook.office.com/*",name:"Outlook",file:"outlook.js"},"outlook.live.com":{url:"*://outlook.live.com/*",name:"Outlook",clone:!0},"pagerduty.com":{url:"*://*.pagerduty.com/*",name:"PagerDuty"},"phacility.com":{url:"*://*.phacility.com/*",name:"Phabricator"},"pivotaltracker.com":{url:"*://*.pivotaltracker.com/*",name:"PivotalTracker"},"placker.com":{url:"*://*.placker.com/*",name:"Placker",file:"placker.js"},"planbox.com":{url:"*://*.planbox.com/*",name:"Planbox"},"podio.com":{url:"*://*.podio.com/*",name:"Podio"},processwire:{url:"",name:"ProcessWire"},"produck.io":{url:"*://*.produck.io/*",name:"Produck"},"producteev.com":{url:"*://*.producteev.com/*",name:"Producteev"},"protonmail.com":{url:"*://*.protonmail.com/*",name:"Protonmail"},"proworkflow.net":{url:"*://*.proworkflow.net/*",name:"Proworkflow"},"proworkflow2.net":{url:"*://*.proworkflow2.net/*",name:"Proworkflow",clone:"true"},"proworkflow3.net":{url:"*://*.proworkflow3.net/*",name:"Proworkflow",clone:"true"},"proworkflow4.net":{url:"*://*.proworkflow4.net/*",name:"Proworkflow",clone:"true"},"proworkflow5.net":{url:"*://*.proworkflow5.net/*",name:"Proworkflow",clone:"true"},"proworkflow6.net":{url:"*://*.proworkflow6.net/*",name:"Proworkflow",clone:"true"},"rally1.rallydev.com":{url:"*://rally1.rallydev.com/*",name:"RallyDev"},"redbooth.com":{url:"*://*.redbooth.com/*",name:"Redbooth"},"rbcommons.com":{url:"*://*.rbcommons.com/*",name:"Reviewboard"},"redmine.org":{url:"*://*.redmine.org/*",name:"Redmine"},"rememberthemilk.com":{url:"*://*.rememberthemilk.com/*",name:"RememberTheMilk"},"rindle.com":{url:"*://*.rindle.com/*",name:"Rindle"},"rollbar.com":{url:"*://*.rollbar.com/*",name:"Rollbar"},"salesforce.com":{url:"*://*.salesforce.com/*,*://*.my.salesforce.com/*",name:"Salesforce"},"force.com":{url:"*://*.force.com/*,*://*.lightning.force.com/*",name:"Salesforce Lightning",file:"salesforce.js"},"scrapbox.io":{url:"*://scrapbox.io/*",name:"Scrapbox"},"sentry.io":{url:"*://*.sentry.io/*",name:"Sentry"},"sifterapp.com":{url:"*://*.sifterapp.com/*",name:"Sifterapp"},"slack.com":{url:"*://*.slack.com/*",name:"Slack"},"smartboard.cl":{url:"*://*.smartboard.cl/*",name:"Smartboard"},"sourcelair.com":{url:"*://*.sourcelair.com/*",name:"Sourcelair",file:"sourcelair.js"},"spidergap.com":{url:"*://*.spidergap.com/*",name:"Spidergap"},"sprint.ly":{url:"*://sprint.ly/*",name:"Sprintly"},"taiga.io":{url:"*://*.taiga.io/*",name:"Taiga"},"targetprocess.com":{url:"*://*.targetprocess.com/*",name:"Targetprocess"},"tasks.office.com":{url:"*://tasks.office.com/*",name:"Microsoft Planner"},"teamwork.com":{url:"*://*.teamwork.com/*",name:"Teamwork"},"teamworkpm.net":{url:"*://*.teamworkpm.net/*",name:"Teamwork",clone:"true"},"testrail.com":{url:"*://*.testrail.com/*",name:"Testrail"},"testrail.net":{url:"*://*.testrail.net/*",name:"Testrail",clone:"true"},"ticktick.com":{url:"*://ticktick.com/*,*://*.ticktick.com/*",name:"TickTick"},"to-do.live.com":{url:"*://*.to-do.live.com/*",name:"Microsoft To-Do",file:"microsoft-to-do.js"},"to-do.microsoft.com":{url:"*://*.to-do.microsoft.com/*",name:"Microsoft To-Do",file:"microsoft-to-do.js"},"to-do.office.com":{url:"*://*.to-do.office.com/*",name:"Microsoft To-Do",file:"microsoft-to-do.js"},"todoist.com":{url:"*://*.todoist.com/app*",name:"Todoist"},"toggl.com":{url:"*://toggl.com/*",name:"Toggl",clone:"true"},"www.toggl.com":{url:"*://www.toggl.com/*",name:"Toggl",clone:"true"},"plan.toggl.com":{url:"*://plan.toggl.com/*",name:"Toggl Plan",file:"toggl-plan.js"},"toodledo.com":{url:"*://*.toodledo.com/*",name:"Toodledo"},"tpondemand.com":{url:"*://*.tpondemand.com/*",name:"Targetprocess",clone:"true"},"trac-hacks.org":{url:"*://trac-hacks.org/*",name:"Trac"},"trac.edgewall.org":{url:"*://trac.edgewall.org/*",name:"Trac",clone:"true"},"trac.wordpress.org":{url:"*://*.trac.wordpress.org/*",name:"Trac",clone:"true"},"trello.com":{url:"*://*.trello.com/*",name:"Trello"},"turtle.ai":{url:"*://*.turtle.ai/*",name:"Turtle"},"unfuddle.com":{url:"*://*.unfuddle.com/*",name:"Unfuddle"},"v1host.com":{url:"*://*.v1host.com/*",name:"VersionOne"},"visualstudio.com":{url:"*://*.visualstudio.com/*",name:"VisualStudio"},"azure.com":{url:"*://*.azure.com/*",name:"VisualStudio"},"waffle.io":{url:"*://waffle.io/*",name:"Waffle"},"wordpress.com":{url:"*://wordpress.com/*",name:"Wordpress"},"workast.io":{url:"*://*.workast.io/*",name:"Workast"},"workflowy.com":{url:"*://workflowy.com/*",name:"Workflowy"},"my.workfront.com":{url:"*://*.my.workfront.com/*",name:"Workfront"},"worksection.com":{url:"*://*.worksection.com/*",name:"Worksection"},"worksection.eu":{url:"*://*.worksection.eu/*",name:"Worksection",clone:"true"},"worksection.net":{url:"*://*.worksection.net/*",name:"Worksection",clone:"true"},"wrike.com":{url:"*://*.wrike.com/*",name:"Wrike"},"sherpadesk.com":{url:"*://*.sherpadesk.com/*",name:"Sherpadesk"},"wunderlist.com":{url:"*://*.wunderlist.com/*",name:"Wunderlist"},"xero.com":{url:"*://*.xero.com/*",name:"Xero"},"zendesk.com":{url:"*://*.zendesk.com/*",name:"Zendesk"},"books.zoho.com":{url:"*://books.zoho.com/*",name:"Zoho Books"},"zube.io":{url:"*://zube.io/*",name:"Zube"},"overv.io":{url:"*://overv.io/*",name:"Overv"},"app.teamleader.eu":{url:"*://app.teamleader.eu/*",name:"Teamleader"},"manageengine.com":{url:"*://*.manageengine.com/*",name:"ManageEngine"},"app.vivifyscrum.com":{url:"*://app.vivifyscrum.com/*",name:"VivifyScrum",clone:"true"},"zammad.com":{url:"*://*.zammad.com/*",name:"Zammad"},"app.zenhub.com":{url:"*://app.zenhub.com/*",name:"Zenhub"}}},13:function(e,t,n){e.exports=n(16)},16:function(e,t,n){e.exports=function(){var e=["navigation","request","process","log","user","state","error","manual"],t=function(e,t,n){for(var o=n,r=0,a=e.length;r<a;r++)o=t(o,e[r],r,e);return o},n=function(e,n){return t(e,function(e,t,o,r){return n(t,o,r)?e.concat(t):e},[])},o=function(e,n){return t(e,function(e,t,o,r){return!0===e||t===n},!1)},r=function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);if(!a)return n;for(var o=0,r=i.length;o<r;o++)Object.prototype.hasOwnProperty.call(e,i[o])&&n.push(i[o]);return n},c=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=1/0),function(n){return"number"==typeof n&&parseInt(""+n,10)===n&&n>=e&&n<=t}},l=function(e){return"function"==typeof e||r(e)&&n(e,function(e){return"function"==typeof e}).length===e.length},u=function(e){return"string"==typeof e&&!!e.length},g={};g.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:u},appVersion:{defaultValue:function(){},message:"should be a string",validate:function(e){return void 0===e||u(e)}},appType:{defaultValue:function(){},message:"should be a string",validate:function(e){return void 0===e||u(e)}},autoDetectErrors:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}},enabledErrorTypes:{defaultValue:function(){return{unhandledExceptions:!0,unhandledRejections:!0}},message:"should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }",allowPartialObject:!0,validate:function(e){if("object"!=typeof e||!e)return!1;var t=s(e),r=s({unhandledExceptions:!0,unhandledRejections:!0});return!(n(t,function(e){return o(r,e)}).length<t.length||n(s(e),function(t){return"boolean"!=typeof e[t]}).length>0)}},onError:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:l},onSession:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:l},onBreadcrumb:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:l},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }",validate:function(e){return e&&"object"==typeof e&&u(e.notify)&&u(e.sessions)&&0===n(s(e),function(e){return!o(["notify","sessions"],e)}).length}},autoTrackSessions:{defaultValue:function(e){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}},enabledReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(e){return null===e||r(e)&&n(e,function(e){return"string"==typeof e}).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(e){return"string"==typeof e&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 25},message:"should be a number ≤100",validate:function(e){return c(0,100)(e)}},enabledBreadcrumbTypes:{defaultValue:function(){return e},message:"should be null or a list of available breadcrumb types ("+e.join(",")+")",validate:function(n){return null===n||r(n)&&t(n,function(t,n){return!1===t?t:o(e,n)},!0)}},context:{defaultValue:function(){},message:"should be a string",validate:function(e){return void 0===e||"string"==typeof e}},user:{defaultValue:function(){return{}},message:"should be an object with { id, email, name } properties",validate:function(e){return null===e||e&&t(s(e),function(e,t){return e&&o(["id","email","name"],t)},!0)}},metadata:{defaultValue:function(){return{}},message:"should be an object",validate:function(e){return"object"==typeof e&&null!==e}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(e){return!e||e&&t(["debug","info","warn","error"],function(t,n){return t&&"function"==typeof e[n]},!0)}},redactedKeys:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(e){return r(e)&&e.length===n(e,function(e){return"string"==typeof e||e&&"function"==typeof e.test}).length}},plugins:{defaultValue:function(){return[]},message:"should be an array of plugin objects",validate:function(e){return r(e)&&e.length===n(e,function(e){return e&&"object"==typeof e&&"function"==typeof e.load}).length}}};var d=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m=function(e,n){return t(e,function(e,t,o,r){return e.concat(n(t,o,r))},[])},p=g.schema,f={releaseStage:d({},p.releaseStage,{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"}}),logger:d({},p.logger,{defaultValue:function(){return"undefined"!=typeof console&&"function"==typeof console.debug?h():void 0}})},h=function(){var e={},t=console.log;return m(["debug","info","warn","error"],function(n){var o=console[n];e[n]="function"==typeof o?o.bind(console,"[bugsnag]"):t.bind(console,"[bugsnag]")}),e},y=function(){function e(e,t,n,o){void 0===o&&(o=new Date),this.type=n,this.message=e,this.metadata=t,this.timestamp=o}var t=e.prototype;return t.toJSON=function(){return{type:this.type,name:this.message,timestamp:this.timestamp,metaData:this.metadata}},e}(),b={};!function(e,t){"use strict";"object"==typeof b?b=t():e.StackFrame=t()}(this,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e){return e.charAt(0).toUpperCase()+e.substring(1)}function n(e){return function(){return this[e]}}var o=["isConstructor","isEval","isNative","isToplevel"],r=["columnNumber","lineNumber"],a=["fileName","functionName","source"],i=o.concat(r,a,["args"]);function s(e){if(e instanceof Object)for(var n=0;n<i.length;n++)e.hasOwnProperty(i[n])&&void 0!==e[i[n]]&&this["set"+t(i[n])](e[i[n]])}s.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof s)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new s(e)}},toString:function(){var t=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",o=this.getFileName()?"@"+this.getFileName():"",r=e(this.getLineNumber())?":"+this.getLineNumber():"",a=e(this.getColumnNumber())?":"+this.getColumnNumber():"";return t+n+o+r+a}};for(var c=0;c<o.length;c++)s.prototype["get"+t(o[c])]=n(o[c]),s.prototype["set"+t(o[c])]=function(e){return function(t){this[e]=Boolean(t)}}(o[c]);for(var l=0;l<r.length;l++)s.prototype["get"+t(r[l])]=n(r[l]),s.prototype["set"+t(r[l])]=function(t){return function(n){if(!e(n))throw new TypeError(t+" must be a Number");this[t]=Number(n)}}(r[l]);for(var u=0;u<a.length;u++)s.prototype["get"+t(a[u])]=n(a[u]),s.prototype["set"+t(a[u])]=function(e){return function(t){this[e]=String(t)}}(a[u]);return s});var v={};!function(e,t){"use strict";"object"==typeof v?v=t(b):e.ErrorStackParser=t(e.StackFrame)}(this,function(e){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,o=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){var o=t.stack.split("\n").filter(function(e){return!!e.match(n)},this);return o.map(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"("),o=n.match(/ (\((.+):(\d+):(\d+)\)$)/),r=(n=o?n.replace(o[0],""):n).split(/\s+/).slice(1),a=this.extractLocation(o?o[1]:r.pop()),i=r.join(" ")||void 0,s=["eval","<anonymous>"].indexOf(a[0])>-1?void 0:a[0];return new e({functionName:i,fileName:s,lineNumber:a[1],columnNumber:a[2],source:t})},this)},parseFFOrSafari:function(t){var n=t.stack.split("\n").filter(function(e){return!e.match(o)},this);return n.map(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e({functionName:t});var n=/((.*".+"[^@]*)?[^@]*)(?:@)/,o=t.match(n),r=o&&o[1]?o[1]:void 0,a=this.extractLocation(t.replace(n,""));return new e({functionName:r,fileName:a[0],lineNumber:a[1],columnNumber:a[2],source:t})},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,o=t.message.split("\n"),r=[],a=2,i=o.length;a<i;a+=2){var s=n.exec(o[a]);s&&r.push(new e({fileName:s[2],lineNumber:s[1],source:o[a]}))}return r},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=t.stacktrace.split("\n"),r=[],a=0,i=o.length;a<i;a+=2){var s=n.exec(o[a]);s&&r.push(new e({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:o[a]}))}return r},parseOpera11:function(n){var o=n.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this);return o.map(function(t){var n,o=t.split("@"),r=this.extractLocation(o.pop()),a=o.shift()||"",i=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(n=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e({functionName:i,args:s,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:t})},this)}}});var T=v,w=function(e){return!(!e||!e.stack&&!e.stacktrace&&!e["opera#sourceloc"]||"string"!=typeof(e.stack||e.stacktrace||e["opera#sourceloc"])||e.stack===e.name+": "+e.message)},B=function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},k=function(e,t,n){"string"==typeof t&&(n?e[t]&&delete e[t][n]:delete e[t])},A={add:function(e,t,n,o){var r,a;if(t){if(null===n)return k(e,t);"object"==typeof n&&(a=n),"string"==typeof n&&((r={})[n]=o,a=r),a&&(e[t]||(e[t]={}),e[t]=d({},e[t],a))}},get:function(e,t,n){if("string"==typeof t)return n?e[t]?e[t][n]:void 0:e[t]},clear:k},_={};!function(e,t){"use strict";"object"==typeof _?_=t(b):e.StackGenerator=t(e.StackFrame)}(this,function(e){return{backtrace:function(t){var n=[],o=10;"object"==typeof t&&"number"==typeof t.maxStackSize&&(o=t.maxStackSize);for(var r=arguments.callee;r&&n.length<o&&r.arguments;){for(var a=new Array(r.arguments.length),i=0;i<a.length;++i)a[i]=r.arguments[i];/function(?:\s+([\w$]+))+\s*\(/.test(r.toString())?n.push(new e({functionName:RegExp.$1||void 0,args:a})):n.push(new e({args:a}));try{r=r.caller}catch(e){break}}return n}}});var S=function(){function e(n,o,r,a,i){void 0===r&&(r=[]),void 0===a&&(a=$()),this.apiKey=void 0,this.context=void 0,this.groupingHash=void 0,this.originalError=i,this._handledState=a,this.severity=this._handledState.severity,this.unhandled=this._handledState.unhandled,this.app={},this.device={},this.request={},this.breadcrumbs=[],this.threads=[],this._metadata={},this._user={},this._session=void 0,this.errors=[{errorClass:j(n),errorMessage:j(o),type:e.__type,stacktrace:t(r,function(e,t){var n=E(t);try{return"{}"===JSON.stringify(n)?e:e.concat(n)}catch(t){return e}},[])}]}var n=e.prototype;return n.addMetadata=function(e,t,n){return A.add(this._metadata,e,t,n)},n.getMetadata=function(e,t){return A.get(this._metadata,e,t)},n.clearMetadata=function(e,t){return A.clear(this._metadata,e,t)},n.getUser=function(){return this._user},n.setUser=function(e,t,n){this._user={id:e,email:t,name:n}},n.toJSON=function(){return{payloadVersion:"4",exceptions:m(this.errors,function(e){return d({},e,{message:e.errorMessage})}),severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,request:this.request,breadcrumbs:this.breadcrumbs,context:this.context,groupingHash:this.groupingHash,metaData:this._metadata,user:this._user,session:this._session}},e}(),E=function(e){var t={file:e.fileName,method:x(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return t.lineNumber>-1&&!t.file&&!t.method&&(t.file="global code"),t},x=function(e){return/^global code$/i.test(e)?"global code":e},$=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},j=function(e){return"string"==typeof e?e:""};S.getStacktrace=function(e,t,o){if(w(e))return T.parse(e).slice(t);try{return n(_.backtrace(),function(e){return-1===(e.functionName||"").indexOf("StackGenerator$$")}).slice(1+o)}catch(e){return[]}},S.create=function(e,t,n,o,r,a){void 0===r&&(r=0);var i,s=O(e,t,o,a),c=s[0],l=s[1];try{var u=S.getStacktrace(c,l>0?1+l+r:0,1+r);i=new S(c.name,c.message,u,n,e)}catch(t){i=new S(c.name,c.message,[],n,e)}return"InvalidError"===c.name&&i.addMetadata(""+o,"non-error parameter",P(e)),i};var P=function(e){return null===e?"null":void 0===e?"undefined":e},O=function(e,t,n,o){var r,a=0,i=function(e){o&&o.warn(n+' received a non-error: "'+e+'"');var t=new Error(n+' received a non-error. See "'+n+'" tab for more detail.');return t.name="InvalidError",t};if(t)switch(typeof e){case"string":case"number":case"boolean":r=new Error(String(e)),a+=1;break;case"function":r=i("function"),a+=2;break;case"object":null!==e&&B(e)?r=e:null!==e&&C(e)?((r=new Error(e.message||e.errorMessage)).name=e.name||e.errorClass,a+=1):(r=i(null===e?"null":"unsupported object"),a+=2);break;default:r=i("nothing"),a+=2}else B(e)?r=e:(r=i(typeof e),a+=2);if(!w(r))try{throw r}catch(e){w(e)&&(r=e,a=1)}return[r,a]};S.__type="browserjs";var C=function(e){return!("string"!=typeof e.name&&"string"!=typeof e.errorClass||"string"!=typeof e.message&&"string"!=typeof e.errorMessage)},D=S,N=function(e,t,n,o){for(var r=!1,a=e.slice();!r&&a.length;)try{r=!1===a.pop()(t)}catch(e){o.error("Error occurred in "+n+" callback, continuing anyway…"),o.error(e)}return r},M=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},L="object"==typeof window?window:self,U=0;for(var R in L)Object.hasOwnProperty.call(L,R)&&U++;var I=navigator.mimeTypes?navigator.mimeTypes.length:0,q=M((I+navigator.userAgent.length).toString(36)+U.toString(36),4),W=function(){return q},V=0,F=4,H=36,z=Math.pow(H,F);function K(){return M((Math.random()*z<<0).toString(H),F)}function J(){var e=(new Date).getTime().toString(H),t=M((V=V<z?V:0,++V-1).toString(H),F),n=W(),o=K()+K();return"c"+e+t+n+o}J.fingerprint=W;var G=J,X=function(){function e(){this.id=G(),this.startedAt=new Date,this._handled=0,this._unhandled=0,this._user={},this.app={},this.device={}}var t=e.prototype;return t.getUser=function(){return this._user},t.setUser=function(e,t,n){this._user={id:e,email:t,name:n}},t.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},t._track=function(e){this[e._handledState.unhandled?"_unhandled":"_handled"]+=1},e}(),Z=function(){},Q=function(){function r(e,t,n,o){var a=this;void 0===t&&(t=g.schema),void 0===n&&(n=[]),this._notifier=o,this._config={},this._schema=t,this._delivery={sendSession:Z,sendEvent:Z},this._logger={debug:Z,info:Z,warn:Z,error:Z},this._plugins={},this._breadcrumbs=[],this._session=null,this._metadata={},this._context=void 0,this._user={},this._cbs={e:[],s:[],sp:[],b:[]},this.Client=r,this.Event=D,this.Breadcrumb=y,this.Session=X,this._config=this._configure(e,n),m(n.concat(this._config.plugins),function(e){e&&a._loadPlugin(e)}),this._depth=1;var i=this,s=this.notify;this.notify=function(){return s.apply(i,arguments)}}var a=r.prototype;return a.addMetadata=function(e,t,n){return A.add(this._metadata,e,t,n)},a.getMetadata=function(e,t){return A.get(this._metadata,e,t)},a.clearMetadata=function(e,t){return A.clear(this._metadata,e,t)},a.getContext=function(){return this._context},a.setContext=function(e){this._context=e},a._configure=function(e,n){var o=t(n,function(e,t){return t&&t.configSchema?d({},e,t.configSchema):e},this._schema),r=t(s(o),function(t,n){var r=o[n].defaultValue(e[n]);if(void 0!==e[n]){var a=o[n].validate(e[n]);a?o[n].allowPartialObject?t.config[n]=d(r,e[n]):t.config[n]=e[n]:(t.errors[n]=o[n].message,t.config[n]=r)}else t.config[n]=r;return t},{errors:{},config:{}}),a=r.errors,i=r.config;if(o.apiKey){if(!i.apiKey)throw new Error("No Bugsnag API Key set");/^[0-9a-f]{32}$/i.test(i.apiKey)||(a.apiKey="should be a string of 32 hexadecimal characters")}return this._metadata=d({},i.metadata),this._user=d({},i.user),this._context=i.context,i.logger&&(this._logger=i.logger),i.onError&&(this._cbs.e=this._cbs.e.concat(i.onError)),i.onBreadcrumb&&(this._cbs.b=this._cbs.b.concat(i.onBreadcrumb)),i.onSession&&(this._cbs.s=this._cbs.s.concat(i.onSession)),s(a).length&&this._logger.warn(Y(a,e)),i},a.getUser=function(){return this._user},a.setUser=function(e,t,n){this._user={id:e,email:t,name:n}},a._loadPlugin=function(e){var t=e.load(this);return e.name&&(this._plugins["~"+e.name+"~"]=t),this},a.getPlugin=function(e){return this._plugins["~"+e+"~"]},a._setDelivery=function(e){this._delivery=e(this)},a.startSession=function(){var e=new X;e.app.releaseStage=this._config.releaseStage,e.app.version=this._config.appVersion,e.app.type=this._config.appType,e._user=d({},this._user);var t=N(this._cbs.s,e,"onSession",this._logger);return t?(this._logger.debug("Session not started due to onSession callback"),this):this._sessionDelegate.startSession(this,e)},a.addOnError=function(e,t){void 0===t&&(t=!1),this._cbs.e[t?"unshift":"push"](e)},a.removeOnError=function(e){this._cbs.e=n(this._cbs.e,function(t){return t!==e})},a._addOnSessionPayload=function(e){this._cbs.sp.push(e)},a.addOnSession=function(e){this._cbs.s.push(e)},a.removeOnSession=function(e){this._cbs.s=n(this._cbs.s,function(t){return t!==e})},a.addOnBreadcrumb=function(e,t){void 0===t&&(t=!1),this._cbs.b[t?"unshift":"push"](e)},a.removeOnBreadcrumb=function(e){this._cbs.b=n(this._cbs.b,function(t){return t!==e})},a.pauseSession=function(){return this._sessionDelegate.pauseSession(this)},a.resumeSession=function(){return this._sessionDelegate.resumeSession(this)},a.leaveBreadcrumb=function(t,n,r){if(t="string"==typeof t?t:"",r="string"==typeof r&&o(e,r)?r:"manual",n="object"==typeof n&&null!==n?n:{},t){var a=new y(t,n,r),i=N(this._cbs.b,a,"onBreadcrumb",this._logger);i?this._logger.debug("Breadcrumb not attached due to onBreadcrumb callback"):(this._breadcrumbs.push(a),this._breadcrumbs.length>this._config.maxBreadcrumbs&&(this._breadcrumbs=this._breadcrumbs.slice(this._breadcrumbs.length-this._config.maxBreadcrumbs)))}},a.notify=function(e,t,n){void 0===n&&(n=Z);var o=D.create(e,!0,void 0,"notify()",this._depth+1,this._logger);this._notify(o,t,n)},a._notify=function(e,t,n){var a=this;if(void 0===n&&(n=Z),e.app=d({},e.app,{releaseStage:this._config.releaseStage,version:this._config.appVersion,type:this._config.appType}),e.context=e.context||this._context,e._metadata=d({},e._metadata,this._metadata),e._user=d({},e._user,this._user),e.breadcrumbs=this._breadcrumbs.slice(),null!==this._config.enabledReleaseStages&&!o(this._config.enabledReleaseStages,this._config.releaseStage))return this._logger.warn("Event not sent due to releaseStage/enabledReleaseStages configuration"),n(null,e);var i=e.severity,s=function(e){a._logger.error("Error occurred in onError callback, continuing anyway…"),a._logger.error(e)},c=[].concat(this._cbs.e).concat(t);!function(e,t,n,o){!function(e,t,n){var o=0,r=function(){if(o>=e.length)return n(null,!0);t(e[o],function(e,t){return e?n(e):!1===t?n(null,!1):(o++,void r())})};r()}(e,function(e,o){if("function"!=typeof e)return o(null);try{if(2!==e.length){var r=e(t);return r&&"function"==typeof r.then?r.then(function(e){return setTimeout(function(){return o(null,e)})},function(e){setTimeout(function(){return n(e),o(null,!0)})}):o(null,r)}e(t,function(e,t){if(e)return n(e),o(null);o(null,t)})}catch(e){n(e),o(null)}},o)}(c,e,s,function(t,c){if(t&&s(t),!c)return a._logger.debug("Event not sent due to onError callback"),n(null,e);o(a._config.enabledBreadcrumbTypes,"error")&&r.prototype.leaveBreadcrumb.call(a,e.errors[0].errorClass,{errorClass:e.errors[0].errorClass,errorMessage:e.errors[0].errorMessage,severity:e.severity},"error"),i!==e.severity&&(e._handledState.severityReason={type:"userCallbackSetSeverity"}),e.unhandled!==e._handledState.unhandled&&(e._handledState.severityReason.unhandledOverridden=!0,e._handledState.unhandled=e.unhandled),a._session&&(a._session._track(e),e._session=a._session),a._delivery.sendEvent({apiKey:e.apiKey||a._config.apiKey,notifier:a._notifier,events:[e]},function(t){return n(t,e)})})},r}(),Y=function(e,t){var n=new Error("Invalid configuration\n"+m(s(e),function(n){return"  - "+n+" "+e[n]+", got "+ee(t[n])}).join("\n\n"));return n},ee=function(e){switch(typeof e){case"string":case"number":case"object":return JSON.stringify(e);default:return String(e)}},te=Q,ne=function(e,t,n,o){var r=o&&o.redactedKeys?o.redactedKeys:[],a=o&&o.redactedPaths?o.redactedPaths:[];return JSON.stringify(function(e,t,n){var o=[],r=0;return function e(a,i){function s(){return i.length>ae&&r>re}if(r++,i.length>oe)return ie;if(s())return ie;if(null===a||"object"!=typeof a)return a;if(function(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return!0;return!1}(o,a))return"[Circular]";if(o.push(a),"function"==typeof a.toJSON)try{r--;var c=e(a.toJSON(),i);return o.pop(),c}catch(e){return se(e)}var l,u=(l=a)instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(l));if(u){r--;var g=e({name:a.name,message:a.message},i);return o.pop(),g}if(function(e){return"[object Array]"===Object.prototype.toString.call(e)}(a)){for(var d=[],m=0,p=a.length;m<p;m++){if(s()){d.push(ie);break}d.push(e(a[m],i.concat("[]")))}return o.pop(),d}var f={};try{for(var h in a)if(Object.prototype.hasOwnProperty.call(a,h))if(ce(n,i.join("."))&&le(t,h))f[h]="[REDACTED]";else{if(s()){f[h]=ie;break}f[h]=e(ue(a,h),i.concat(h))}}catch(e){}return o.pop(),f}(e,[])}(e,r,a),t,n)},oe=20,re=25e3,ae=8,ie="...";function se(e){return"[Throws: "+(e?e.message:"?")+"]"}function ce(e,t){for(var n=0,o=e.length;n<o;n++)if(0===t.indexOf(e[n]))return!0;return!1}function le(e,t){for(var n=0,o=e.length;n<o;n++){if("string"==typeof e[n]&&e[n].toLowerCase()===t.toLowerCase())return!0;if(e[n]&&"function"==typeof e[n].test&&e[n].test(t))return!0}return!1}function ue(e,t){try{return e[t]}catch(e){return se(e)}}var ge={},de=["events.[].metaData","events.[].breadcrumbs.[].metaData","events.[].request"];ge.event=function(e,t){var n=ne(e,null,null,{redactedPaths:de,redactedKeys:t});if(n.length>1e6&&(e.events[0]._metadata={notifier:"WARNING!\nSerialized payload was "+n.length/1e6+"MB (limit = 1MB)\nmetadata was removed"},(n=ne(e,null,null,{redactedPaths:de,redactedKeys:t})).length>1e6))throw new Error("payload exceeded 1MB limit");return n},ge.session=function(e,t){var n=ne(e,null,null);if(n.length>1e6)throw new Error("payload exceeded 1MB limit");return n};var me={};me=function(e,t){return void 0===t&&(t=window),{sendEvent:function(n,o){void 0===o&&(o=function(){});var r=pe(e._config,"notify","4",t),a=new t.XDomainRequest;a.onload=function(){o(null)},a.open("POST",r),setTimeout(function(){try{a.send(ge.event(n,e._config.redactedKeys))}catch(t){e._logger.error(t),o(t)}},0)},sendSession:function(n,o){void 0===o&&(o=function(){});var r=pe(e._config,"sessions","1",t),a=new t.XDomainRequest;a.onload=function(){o(null)},a.open("POST",r),setTimeout(function(){try{a.send(ge.session(n,e._config.redactedKeys))}catch(t){e._logger.error(t),o(t)}},0)}}};var pe=function(e,t,n,o){var r=JSON.parse(JSON.stringify(new Date)),a=fe(e.endpoints[t],o.location.protocol);return a+"?apiKey="+encodeURIComponent(e.apiKey)+"&payloadVersion="+n+"&sentAt="+encodeURIComponent(r)},fe=me._matchPageProtocol=function(e,t){return"http:"===t?e.replace(/^https:/,"http:"):e},he=function(e,t){return void 0===t&&(t=window),{sendEvent:function(n,o){void 0===o&&(o=function(){});try{var r=e._config.endpoints.notify,a=new t.XMLHttpRequest;a.onreadystatechange=function(){a.readyState===t.XMLHttpRequest.DONE&&o(null)},a.open("POST",r),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Bugsnag-Api-Key",n.apiKey||e._config.apiKey),a.setRequestHeader("Bugsnag-Payload-Version","4"),a.setRequestHeader("Bugsnag-Sent-At",(new Date).toISOString()),a.send(ge.event(n,e._config.redactedKeys))}catch(t){e._logger.error(t)}},sendSession:function(n,o){void 0===o&&(o=function(){});try{var r=e._config.endpoints.sessions,a=new t.XMLHttpRequest;a.onreadystatechange=function(){a.readyState===t.XMLHttpRequest.DONE&&o(null)},a.open("POST",r),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Bugsnag-Api-Key",e._config.apiKey),a.setRequestHeader("Bugsnag-Payload-Version","1"),a.setRequestHeader("Bugsnag-Sent-At",(new Date).toISOString()),a.send(ge.session(n,e._config.redactedKeys))}catch(t){e._logger.error(t)}}}},ye=new Date,be=function(){ye=new Date},ve={name:"appDuration",load:function(e){return e.addOnError(function(e){var t=new Date;e.app.duration=t-ye},!0),{reset:be}}},Te=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},we="object"==typeof window?window:self,Be=0;for(var ke in we)Object.hasOwnProperty.call(we,ke)&&Be++;var Ae=navigator.mimeTypes?navigator.mimeTypes.length:0,_e=Te((Ae+navigator.userAgent.length).toString(36)+Be.toString(36),4),Se=function(){return _e},Ee=0,xe=4,$e=36,je=Math.pow($e,xe);function Pe(){return Te((Math.random()*je<<0).toString($e),xe)}function Oe(){var e=(new Date).getTime().toString($e),t=Te((Ee=Ee<je?Ee:0,++Ee-1).toString($e),xe),n=Se(),o=Pe()+Pe();return"c"+e+t+n+o}Oe.fingerprint=Se;var Ce=Oe,De=function(e,t){return void 0===e&&(e=navigator),void 0===t&&(t=window.screen),{load:function(n){var o={locale:e.browserLanguage||e.systemLanguage||e.userLanguage||e.language,userAgent:e.userAgent};t&&t.orientation&&t.orientation.type?o.orientation=t.orientation.type:o.orientation=document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape":"portrait",n._config.generateAnonymousId&&(o.id=function(){try{var e=window.localStorage,t=e.getItem("bugsnag-anonymous-id");return t&&/^c[a-z0-9]{20,32}$/.test(t)?t:(t=Ce(),e.setItem("bugsnag-anonymous-id",t),t)}catch(e){}}()),n.addOnSession(function(e){e.device=d({},e.device,o)}),n.addOnError(function(e){e.device=d({},e.device,o,{time:new Date})},!0)},configSchema:{generateAnonymousId:{validate:function(e){return!0===e||!1===e},defaultValue:function(){return!0},message:"should be true|false"}}}},Ne=function(e){return void 0===e&&(e=window),{load:function(t){t.addOnError(function(t){t.request&&t.request.url||(t.request=d({},t.request,{url:e.location.href}))},!0)}}},Me={load:function(e){e._sessionDelegate=Le}},Le={startSession:function(e,t){var n=e;return n._session=t,n._pausedSession=null,null===n._config.enabledReleaseStages||o(n._config.enabledReleaseStages,n._config.releaseStage)?(n._delivery.sendSession({notifier:n._notifier,device:t.device,app:t.app,sessions:[{id:t.id,startedAt:t.startedAt,user:t._user}]}),n):(n._logger.warn("Session not sent due to releaseStage/enabledReleaseStages configuration"),n)},resumeSession:function(e){return e._session?e:e._pausedSession?(e._session=e._pausedSession,e._pausedSession=null,e):e.startSession()},pauseSession:function(e){e._pausedSession=e._session,e._session=null}},Ue={load:function(e){e._config.collectUserIp||e.addOnError(function(e){e._user&&void 0===e._user.id&&delete e._user.id,e._user=d({id:"[REDACTED]"},e._user),e.request=d({clientIp:"[REDACTED]"},e.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}}}},Re={load:function(e){var n=/^dev(elopment)?$/.test(e._config.releaseStage);e._config.enabledBreadcrumbTypes&&o(e._config.enabledBreadcrumbTypes,"log")&&!n&&m(Ie,function(n){var o=console[n];console[n]=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];e.leaveBreadcrumb("Console output",t(a,function(e,t,n){var o="[Unknown value]";try{o=String(t)}catch(e){}if("[object Object]"===o)try{o=JSON.stringify(t)}catch(e){}return e["["+n+"]"]=o,e},{severity:0===n.indexOf("group")?"log":n}),"log"),o.apply(console,a)},console[n]._restore=function(){console[n]=o}})}},Ie=n(["log","debug","info","warn","error"],function(e){return"undefined"!=typeof console&&"function"==typeof console[e]}),qe=function(e,o){return void 0===e&&(e=document),void 0===o&&(o=window),{load:function(r){if(r._config.trackInlineScripts){var a=o.location.href,i="",s=!!e.attachEvent,c=s?"complete"===e.readyState:"loading"!==e.readyState,l=function(){return e.documentElement.outerHTML};i=l();var u=e.onreadystatechange;e.onreadystatechange=function(){"interactive"===e.readyState&&(i=l(),c=!0);try{u.apply(this,arguments)}catch(e){}};var g=null,d=function(e){g=e},p=function(){var t=e.currentScript||g;if(!t&&!c){var n=e.scripts||e.getElementsByTagName("script");t=n[n.length-1]}return t};r.addOnError(function(e){e.errors[0].stacktrace=n(e.errors[0].stacktrace,function(e){return!/__trace__$/.test(e.method)});var o=e.errors[0].stacktrace[0];if(!o||!o.file||o.file.replace(/#.*$/,"")===a.replace(/#.*$/,"")){var r=p();if(r){var s=r.innerHTML;e.addMetadata("script","content",s.length<=5e5?s:s.substr(0,5e5)),o&&o.lineNumber&&(o.code=function(e){c&&i||(i=l());var n=["\x3c!-- DOC START --\x3e"].concat(i.split("\n")),o=e-1,r=Math.max(o-3,0),a=Math.min(o+3,n.length);return t(n.slice(r,a),function(e,t,n){return e[r+1+n]=t.length<=200?t:t.substr(0,200),e},{})}(o.lineNumber))}}},!0);var f=m(["setTimeout","setInterval","setImmediate","requestAnimationFrame"],function(e){return We(o,e,function(e){return y(e,function(e){return{get:function(){return e[0]},replace:function(t){e[0]=t}}})})}),h=f[0];m(["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],function(e){o[e]&&o[e].prototype&&Object.prototype.hasOwnProperty.call(o[e].prototype,"addEventListener")&&(We(o[e].prototype,"addEventListener",function(e){return y(e,Ve)}),We(o[e].prototype,"removeEventListener",function(e){return y(e,Ve,!0)}))})}function y(e,t,n){return void 0===n&&(n=!1),function(){var o=[].slice.call(arguments);try{var r=t(o),a=r.get();if(n&&e.apply(this,o),"function"!=typeof a)return e.apply(this,o);if(a.__trace__)r.replace(a.__trace__);else{var i=p();a.__trace__=function(){d(i),h(function(){d(null)},0);var e=a.apply(this,arguments);return d(null),e},a.__trace__.__trace__=a.__trace__,r.replace(a.__trace__)}}catch(e){}if(e.apply)return e.apply(this,o);switch(o.length){case 1:return e(o[0]);case 2:return e(o[0],o[1]);default:return e()}}}},configSchema:{trackInlineScripts:{validate:function(e){return!0===e||!1===e},defaultValue:function(){return!0},message:"should be true|false"}}}};function We(e,t,n){var o=e[t];if(!o)return o;var r=n(o);return e[t]=r,o}function Ve(e){var t=!!e[1]&&"function"==typeof e[1].handleEvent;return{get:function(){return t?e[1].handleEvent:e[1]},replace:function(n){t?e[1].handleEvent=n:e[1]=n}}}var Fe=function(e){return void 0===e&&(e=window),{load:function(t){"addEventListener"in e&&t._config.enabledBreadcrumbTypes&&o(t._config.enabledBreadcrumbTypes,"user")&&e.addEventListener("click",function(n){var o,r;try{o=He(n.target),r=function e(t,n){var o=[t.tagName];if(t.id&&o.push("#"+t.id),t.className&&t.className.length&&o.push("."+t.className.split(" ").join(".")),!n.document.querySelectorAll||!Array.prototype.indexOf)return o.join("");try{if(1===n.document.querySelectorAll(o.join("")).length)return o.join("")}catch(e){return o.join("")}if(t.parentNode.childNodes.length>1){var r=Array.prototype.indexOf.call(t.parentNode.childNodes,t)+1;o.push(":nth-child("+r+")")}return 1===n.document.querySelectorAll(o.join("")).length?o.join(""):t.parentNode?e(t.parentNode,n)+" > "+o.join(""):o.join("")}(n.target,e)}catch(e){o="[hidden]",r="[hidden]",t._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z")}t.leaveBreadcrumb("UI click",{targetText:o,targetSelector:r},"user")},!0)}}},He=function(e){var t,n,o=e.textContent||e.innerText||"";return o||"submit"!==e.type&&"button"!==e.type||(o=e.value),o=o.replace(/^\s+|\s+$/g,""),n=140,(t=o)&&t.length<=n?t:t.slice(0,n-"(...)".length)+"(...)"},ze={};ze=function(e){return void 0===e&&(e=window),{load:function(t){if("addEventListener"in e&&t._config.enabledBreadcrumbTypes&&o(t._config.enabledBreadcrumbTypes,"navigation")){var n=function(e){return function(){return t.leaveBreadcrumb(e,{},"navigation")}};e.addEventListener("pagehide",n("Page hidden"),!0),e.addEventListener("pageshow",n("Page shown"),!0),e.addEventListener("load",n("Page loaded"),!0),e.document.addEventListener("DOMContentLoaded",n("DOMContentLoaded"),!0),e.addEventListener("load",function(){return e.addEventListener("popstate",n("Navigated back"),!0)}),e.addEventListener("hashchange",function(n){var o=n.oldURL?{from:Ke(n.oldURL,e),to:Ke(n.newURL,e),state:Ge(e)}:{to:Ke(e.location.href,e)};t.leaveBreadcrumb("Hash changed",o,"navigation")},!0),e.history.replaceState&&Je(t,e.history,"replaceState",e),e.history.pushState&&Je(t,e.history,"pushState",e),t.leaveBreadcrumb("Bugsnag loaded",{},"navigation")}}}};var Ke=function(e,t){var n=t.document.createElement("A");return n.href=e,""+n.pathname+n.search+n.hash},Je=function(e,t,n,o){var r=t[n];t[n]=function(a,i,s){e.leaveBreadcrumb("History "+n,function(e,t,n,o){var r=Ke(e.location.href,e);return{title:n,state:t,prevState:Ge(e),to:o||r,from:r}}(o,a,i,s),"navigation"),"function"==typeof e.resetEventCount&&e.resetEventCount(),e._config.autoTrackSessions&&e.startSession(),r.apply(t,[a,i].concat(void 0!==s?s:[]))}},Ge=function(e){try{return e.history.state}catch(e){}},Xe="request",Ze="BS~~S",Qe="BS~~U",Ye="BS~~M",et=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=window);var n={load:function(n){if(n._config.enabledBreadcrumbTypes&&o(n._config.enabledBreadcrumbTypes,"request")){var r=[n._config.endpoints.notify,n._config.endpoints.sessions].concat(e);!function(){if("addEventListener"in t.XMLHttpRequest.prototype){var e=t.XMLHttpRequest.prototype.open;t.XMLHttpRequest.prototype.open=function(t,n){this[Qe]=n,this[Ye]=t,this[Ze]&&(this.removeEventListener("load",s),this.removeEventListener("error",c)),this.addEventListener("load",s),this.addEventListener("error",c),this[Ze]=!0,e.apply(this,arguments)}}}(),function(){if("fetch"in t&&!t.fetch.polyfill){var e=t.fetch;t.fetch=function(){var t,n=arguments,o=arguments[0],r=arguments[1],s=null;return o&&"object"==typeof o?(s=o.url,r&&"method"in r?t=r.method:o&&"method"in o&&(t=o.method)):(s=o,r&&"method"in r&&(t=r.method)),void 0===t&&(t="GET"),new Promise(function(o,r){e.apply(void 0,n).then(function(e){a(e,t,s),o(e)}).catch(function(e){i(t,s),r(e)})})}}}();var a=function(e,t,o){var r={status:e.status,request:t+" "+o};e.status>=400?n.leaveBreadcrumb("fetch() failed",r,Xe):n.leaveBreadcrumb("fetch() succeeded",r,Xe)},i=function(e,t){n.leaveBreadcrumb("fetch() error",{request:e+" "+t},Xe)}}function s(){if(!o(r,this[Qe])){var e={status:this.status,request:this[Ye]+" "+this[Qe]};this.status>=400?n.leaveBreadcrumb("XMLHttpRequest failed",e,Xe):n.leaveBreadcrumb("XMLHttpRequest succeeded",e,Xe)}}function c(){o(r,this[Qe])||n.leaveBreadcrumb("XMLHttpRequest error",{request:this[Ye]+" "+this[Qe]},Xe)}}};return n},tt={load:function(e){var t=0;e.addOnError(function(n){if(t>=e._config.maxEvents)return!1;t++}),e.resetEventCount=function(){t=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer ≤100",validate:function(e){return c(1,100)(e)}}}},nt={},ot=(nt={load:function(e){e.addOnError(function(e){var n=t(e.errors,function(e,t){return e.concat(t.stacktrace)},[]);m(n,function(e){e.file=ot(e.file)})})}})._strip=function(e){return"string"==typeof e?e.replace(/\?.*$/,"").replace(/#.*$/,""):e},rt=function(e){return void 0===e&&(e=window),{load:function(t){if(t._config.autoDetectErrors&&t._config.enabledErrorTypes.unhandledExceptions){var n=e.onerror;e.onerror=function(e,o,r,a,i){if(0===r&&/Script error\.?/.test(e))t._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z");else{var s,c={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}};if(i)s=t.Event.create(i,!0,c,"window onerror",1),at(s.errors[0].stacktrace,o,r,a);else if("object"!=typeof e||null===e||o&&"string"==typeof o||r||a||i)s=t.Event.create(e,!0,c,"window onerror",1),at(s.errors[0].stacktrace,o,r,a);else{var l=e.type?"Event: "+e.type:"Error",u=e.message||e.detail||"";(s=t.Event.create({name:l,message:u},!0,c,"window onerror",1)).originalError=e,s.addMetadata("window onerror",{event:e,extraParameters:o})}t._notify(s)}"function"==typeof n&&n.apply(this,arguments)}}}}},at=function(e,t,n,o){e[0]||e.push({});var r=e[0];r.file||"string"!=typeof t||(r.file=t),!r.lineNumber&&it(n)&&(r.lineNumber=n),r.columnNumber||(it(o)?r.columnNumber=o:window.event&&it(window.event.errorCharacter)&&(r.columnNumber=window.event.errorCharacter))},it=function(e){return"number"==typeof e&&"NaN"!==String.call(e)},st=function(e){void 0===e&&(e=window);var t={load:function(t){if(t._config.autoDetectErrors&&t._config.enabledErrorTypes.unhandledRejections){var n=function(e){var n=e.reason,o=!1;try{e.detail&&e.detail.reason&&(n=e.detail.reason,o=!0)}catch(e){}var r=t.Event.create(n,!1,{severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}},"unhandledrejection handler",1,t._logger);o&&m(r.errors[0].stacktrace,ct(n)),t._notify(r,function(e){var t;B(e.originalError)&&!e.originalError.stack&&e.addMetadata("unhandledRejection handler",((t={})[Object.prototype.toString.call(e.originalError)]={name:e.originalError.name,message:e.originalError.message,code:e.originalError.code},t))})};"addEventListener"in e?e.addEventListener("unhandledrejection",n):e.onunhandledrejection=function(e,t){n({detail:{reason:e,promise:t}})}}}};return t},ct=function(e){return function(t){t.file!==e.toString()&&t.method&&(t.method=t.method.replace(/^\s+/,""))}},lt={},ut=d({},g.schema,f),gt={_client:null,createClient:function(e){"string"==typeof e&&(e={apiKey:e}),e||(e={});var t,n=[ve,De(),(void 0===t&&(t=window),{load:function(e){e.addOnError(function(e){void 0===e.context&&(e.context=t.location.pathname)},!0)}}),Ne(),tt,Me,Ue,nt,rt(),st(),ze(),Fe(),et(),Re,qe()],o=new te(e,ut,n,{name:"Bugsnag JavaScript",version:"7.9.2",url:"https://github.com/bugsnag/bugsnag-js"});return o._setDelivery(window.XDomainRequest?me:he),o._logger.debug("Loaded!"),o._config.autoTrackSessions?o.startSession():o},start:function(e){return gt._client?(gt._client._logger.warn("Bugsnag.start() was called more than once. Ignoring."),gt._client):(gt._client=gt.createClient(e),gt._client)}};return m(["resetEventCount"].concat(s(te.prototype)),function(e){/^_/.test(e)||(gt[e]=function(){if(!gt._client)return console.log("Bugsnag."+e+"() was called before Bugsnag.start()");gt._client._depth+=1;var t=gt._client[e].apply(gt._client,arguments);return gt._client._depth-=1,t})}),(lt=gt).Client=te,lt.Event=D,lt.Session=X,lt.Breadcrumb=y,lt.default=gt,lt}()},209:function(e,t,n){var o=self.crypto||self.msCrypto;e.exports=function(e){e=e||21;for(var t="",n=o.getRandomValues(new Uint8Array(e));0<e--;)t+="_~getRandomVsCrypwhil0214563789bcfjkquvxzABDEFGHIJKLMNOPQSTUWXYZ"[63&n[e]];return t}},26:function(e,t,n){"use strict";t.a='<?xml version="1.0" encoding="UTF-8"?>\n<svg height="23pt" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="23pt" version="1.1" viewBox="0,0,23,23">\n<title>Toggl Button</title>\n<defs/>\n<g opacity="1">\n\x3c!-- \n    WARNING!\n    Make sure that the "path" elements have the correct classes\n    so that the specific paths can be selected reliably.\n--\x3e\n<path class="play-icon" d="M3+11.5C3+6.80558+6.80558+3+11.5+3C16.1944+3+20+6.80558+20+11.5C20+16.1944+16.1944+20+11.5+20C6.80558+20+3+16.1944+3+11.5Z" opacity="1" fill="black"/>\n<path class="background-circle" d="M11.1+17C8.1+17+5.7+14.5+5.7+11.5C5.7+9+7.4+6.9+9.7+6.3L9.7+7.9C8.2+8.4+7.2+9.9+7.2+11.5C7.2+13.7+8.9+15.5+11.1+15.5C13.3+15.5+15.1+13.7+15.1+11.5C15.1+9.9+14+8.4+12.6+7.9L12.6+6.3C14.9+6.9+16.6+9+16.6+11.5C16.6+14.5+14.1+17+11.1+17L11.1+17ZM10.3+4.5L11.9+4.5L11.9+12.2L10.3+12.2L10.3+4.5ZM11.1+0.1C5+0.1+0+5.1+0+11.3C0+17.4+5+22.4+11.1+22.4C17.3+22.4+22.2+17.4+22.2+11.3C22.2+5.1+17.3+0.1+11.1+0.1L11.1+0.1Z" opacity="1" fill="#DD6FD1"/>\n</g>\n</svg>\n'},3:function(e,t,n){var o,r,a;r=[e],void 0===(a="function"==typeof(o=function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const t="The message port closed before a response was received.",n="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",o=e=>{const o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getBrowserInfo:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(o).length)throw new Error("api-metadata.json has not been included in browser-polyfill");const r=(t,n)=>(...o)=>{e.runtime.lastError?t.reject(e.runtime.lastError):n.singleCallbackArg||o.length<=1&&!1!==n.singleCallbackArg?t.resolve(o[0]):t.resolve(o)},a=e=>1==e?"argument":"arguments",i=(e,t,n)=>new Proxy(t,{apply:(t,o,r)=>n.call(o,e,...r)});let s=Function.call.bind(Object.prototype.hasOwnProperty);const c=(e,t={},n={})=>{let o=Object.create(null),l={has:(t,n)=>n in e||n in o,get(l,u,g){if(u in o)return o[u];if(!(u in e))return;let d=e[u];if("function"==typeof d)if("function"==typeof t[u])d=i(e,e[u],t[u]);else if(s(n,u)){let t=((e,t)=>(function(n,...o){if(o.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${o.length}`);if(o.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${o.length}`);return new Promise((a,i)=>{if(t.fallbackToNoCallback)try{n[e](...o,r({resolve:a,reject:i},t))}catch(r){console.warn(`${e} API method doesn't seem to support the callback parameter, `+"falling back to call it without a callback: ",r),n[e](...o),t.fallbackToNoCallback=!1,t.noCallback=!0,a()}else t.noCallback?(n[e](...o),a()):n[e](...o,r({resolve:a,reject:i},t))})}))(u,n[u]);d=i(e,e[u],t)}else d=d.bind(e);else{if("object"!=typeof d||null===d||!s(t,u)&&!s(n,u))return Object.defineProperty(o,u,{configurable:!0,enumerable:!0,get:()=>e[u],set(t){e[u]=t}}),d;d=c(d,t[u],n[u])}return o[u]=d,d},set:(t,n,r,a)=>(n in o?o[n]=r:e[n]=r,!0),defineProperty:(e,t,n)=>Reflect.defineProperty(o,t,n),deleteProperty:(e,t)=>Reflect.deleteProperty(o,t)},u=Object.create(e);return new Proxy(u,l)},l=e=>({addListener(t,n,...o){t.addListener(e.get(n),...o)},hasListener:(t,n)=>t.hasListener(e.get(n)),removeListener(t,n){t.removeListener(e.get(n))}});let u=!1;const g=new class extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}(e=>"function"!=typeof e?e:function(t,o,r){let a,i,s=!1,c=new Promise(e=>{a=function(t){u||(console.warn(n,(new Error).stack),u=!0),s=!0,e(t)}});try{i=e(t,o,a)}catch(e){i=Promise.reject(e)}const l=!0!==i&&(e=>e&&"object"==typeof e&&"function"==typeof e.then)(i);if(!0!==i&&!l&&!s)return!1;const g=e=>{e.then(e=>{r(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)})};return g(l?i:c),!0}),d=(n,o,r,...i)=>{if(i.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${a(o.minArgs)} for ${n}(), got ${i.length}`);if(i.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${a(o.maxArgs)} for ${n}(), got ${i.length}`);return new Promise((n,o)=>{const a=(({reject:n,resolve:o},r)=>{e.runtime.lastError?e.runtime.lastError.message===t?o():n(e.runtime.lastError):r&&r.__mozWebExtensionPolyfillReject__?n(new Error(r.message)):o(r)}).bind(null,{resolve:n,reject:o});i.push(a),r.sendMessage(...i)})},m={runtime:{onMessage:l(g),onMessageExternal:l(g),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{networkPredictionEnabled:p,webRTCIPHandlingPolicy:p},services:{passwordSavingEnabled:p},websites:{hyperlinkAuditingEnabled:p,referrersEnabled:p}},c(e,m,o)};e.exports=o(chrome)}else e.exports=browser})?o.apply(t,r):o)||(e.exports=a)},466:function(e,t,n){"use strict";n.r(t);var o=n(3),r=n.n(o),a=n(6),i=n(7);var s=n(11);const c=window.indexedDB,l=()=>new Promise((e,t)=>{const n=c.open("TogglExtension",2);n.onupgradeneeded=()=>{const e=n.result;e.objectStoreNames.contains("LocalData")||(console.log("Creating IDB Object Store"),e.createObjectStore("LocalData",{keyPath:"id"}))},n.onsuccess=()=>{e(n.result)},n.onerror=t}),u=e=>l().then(t=>new Promise((n,o)=>{const r=t.transaction("LocalData","readonly"),a=r.objectStore("LocalData").get(e);a.onsuccess=()=>n(a.result&&a.result.value),a.onerror=o,r.oncomplete=()=>t.close(),r.onerror=o})),g=(e,t)=>l().then(n=>new Promise((o,r)=>{const a=n.transaction("LocalData","readwrite"),i=a.objectStore("LocalData"),s={id:e,value:t},c=i.put(s);c.onerror=r,c.onsuccess=o,a.oncomplete=()=>n.close(),a.onerror=r})),d=()=>l().then(e=>new Promise((t,n)=>{const o=e.transaction("LocalData","readwrite"),r=o.objectStore("LocalData").clear();r.onerror=n,r.onsuccess=t,o.oncomplete=()=>e.close(),o.onerror=n})),m="TogglButton-origins",p={startAutomatically:!1,stopAutomatically:!1,showRightClickButton:!0,darkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,showPostPopup:!0,nannyCheckEnabled:!0,nannyInterval:36e5,nannyFromTo:"09:00-17:00",idleDetectionEnabled:!1,pomodoroModeEnabled:!1,pomodoroSoundFile:"sounds/time_is_up_1.mp3",pomodoroSoundEnabled:!0,pomodoroSoundVolume:1,pomodoroStopTimeTrackingWhenTimerEnds:!0,pomodoroTickerEnabled:!1,pomodoroTickerFile:"sounds/tick-tock.mp3",pomodoroTickerVolume:1,pomodoroInterval:25,stopAtDayEnd:!1,dayEndTime:"17:00",defaultProject:0,rememberProjectPer:"false",enableAutoTagging:!1,sendErrorReports:!0,sendUsageStatistics:!0},f={[m]:!0,timeEntriesTracked:!0,dismissedReviewPrompt:!0};function h(e){return f[e]||!1}function y(e){return e.file?e.file:(e.name||e).toLowerCase().replace(" ","-")+".js"}const b=e=>void 0!==e?"false"===e||"true"===e?JSON.parse(e):e:null;var v=n(209),T=n.n(v);const w="GA:clientID";let B=localStorage.getItem(w);var k=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}c((o=o.apply(e,t||[])).next())})};class A{static instance(e,t,n=!1){return k(this,void 0,void 0,function*(){const o=new AudioContext,r=o.createGain(),a=o.createBufferSource();return r.gain.value=t,r.connect(o.destination),a.connect(r),a.loop=n,a.buffer=yield new Promise((t,n)=>k(this,void 0,void 0,function*(){let r=yield A.getAudioBuffer(e);o.decodeAudioData(r,e=>t(e),e=>n(e))})),{play:()=>a.start(0),stop:()=>(a.stop(0),o.close())}})}static getAudioBuffer(e){return k(this,void 0,void 0,function*(){let t=r.a.runtime.getURL(e),n=yield fetch(t);return yield n.arrayBuffer()})}}var _=A,S=n(26);const E=3600,x=15;let $=0;const j=-1===navigator.userAgent.indexOf("Chrome");function P(){return e=0,t=60,Math.floor(Math.random()*(t-e+1))+e;var e,t}function O(e){return function(t){try{if(Array.isArray(t)&&t.length&&t[0].url.match("https?://"))return e(t)}catch(e){Object(i.f)(e)}}}window.TogglButton={$user:null,$curEntry:null,$latestStoppedEntry:null,$ApiUrl:"https://track.toggl.com/api",$ApiV8Url:"https://track.toggl.com/api/v8",$ApiV9Url:"https://track.toggl.com/api/v9",$sendResponse:null,websocket:{socket:null,retryCount:0},$nannyTimer:null,$lastSyncDate:null,$lastWork:{id:null,date:Date.now()},$checkingUserState:!1,checkingWorkdayEnd:!1,pomodoroAlarm:null,pomodoroProgressTimer:null,$ticker:null,pomodoroInterval:null,pomodoroFocusMode:null,localEntry:null,$userState:"active",$fullVersion:"TogglButton/1.71.0",$version:"1.71.0",queue:[],$editForm:'<div id="toggl-button-edit-form"><form autocomplete="off"><a class="toggl-button toggl-button-edit-form-button {service} active" href="javascript:void(0)">'+S.a+'<span>Stop timer</span></a><a id="toggl-button-hide"></a><div class="TB__Dialog__field" id="toggl-button-duration-row">\n      <div>\n        <input name="toggl-button-duration" type="text" id="toggl-button-duration" class="TB__Input" value="" placeholder="00:00" autocomplete="off">\n      </div>\n    </div><div class="TB__Dialog__field">\n      <div><input name="toggl-button-description" type="text" id="toggl-button-description" class="TB__Input" value="" placeholder="What are you doing?" autocomplete="off" /></div>\n    </div>\n    <div class="TB__Dialog__field" tabindex="0">\n      <div>\n        <div id="toggl-button-project-placeholder" class="TB__FormFieldTrigger__trigger" disabled><span class="tb-project-bullet"><div>No project</div></span><span class="TB__Popdown__caret"></span></div>\n        <div class="TB__Popdown__overlay"></div>\n        <div class="TB__Popdown__content">\n          <div class="TB__Popdown__filterContainer">\n            <input name="toggl-button-project-filter" type="text" id="toggl-button-project-filter" class="TB__Popdown__filter" value="" placeholder="Find project..." autocomplete="off">\n          </div>\n          <div id="project-autocomplete">{projects}</div>\n        </div>\n      </div>\n    </div>\n    \n    <div class="TB__Dialog__field" tabindex="0">\n      <div>\n        <div id="toggl-button-tag-placeholder" class="TB__FormFieldTrigger__trigger" disabled><div>Add tags</div><span class="TB__Popdown__caret"></span></div>\n        <div class="TB__Popdown__overlay"></div>\n        <div class="TB__Popdown__content">\n          <div class="TB__Popdown__filterContainer">\n            <input name="toggl-button-tag-filter" type="text" id="toggl-button-tag-filter" class="TB__Popdown__filter" value="" placeholder="Find tags..." autocomplete="off">\n          </div>\n          <div id="tag-autocomplete">\n            <div class="tag-clear">Clear selected tags</div>\n            <a href="javascript:void(0)" class="add-new-tag">+ Add tag "<span></span>"</a>\n            {tags}\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="TB__Dialog__field"><div class="tb-billable {billable}"><div class="toggl-button-billable-label">Billable</div><div class="toggl-button-billable-flag"><span></span></div></div></div>\n      <div class="tb-actions-button-group">\n        <div id="toggl-button-update" tabindex="0" class="TB__Button__button">Done</div>\n      </div>\n      <div class="tb-actions-button-group">\n        <button type="button" id="tb-edit-form-cancel" tabindex="0" class="TB__Secondary__button">Cancel</button>\n        <div id="toggl-button-delete" tabindex="0" class="TB__Button__button danger">Delete</div>\n      </div>\n    <input type="submit" class="toggl-button-hidden"></form></div>',fetchUser:function(e){return a.a.leaveBreadcrumb("Fetching user with related data"),new Promise((t,n)=>{TogglButton.ajax("/me?with_related_data=true",{token:e,baseUrl:TogglButton.$ApiV8Url,onLoad:async function(e){let n;const o={},s={},c={};let l=null,u=null;try{if(200===e.status){if(r.a.tabs.query({active:!0,currentWindow:!0}).then(O(function(e){r.a.tabs.sendMessage(e[0].id,{type:"sync"}).catch(e=>{if("Could not establish connection. Receiving end does not exist."!==e.message)throw new Error(e)})})),(n=JSON.parse(e.responseText)).data.projects&&n.data.projects.forEach(function(e){e.active&&!e.server_deleted_at&&(o[e.name+e.id]=e)}),n.data.clients&&n.data.clients.forEach(function(e){s[e.id]=e,c[e.name.toLowerCase()+e.id]=e}),n.data.tasks&&(l={},n.data.tasks.forEach(function(e){const t=e.pid;l[t]||(l[t]=[]),l[t].push(e)})),n.data.time_entries){const{time_entries:e}=n.data;u=e.find(e=>e.duration<0)||null}if(TogglButton.hasWorkspaceBeenRevoked(n.data.workspaces)&&TogglButton.showRevokedWSView(),TogglButton.updateTriggers(u),TogglButton.$user=n.data,TogglButton.$user.time_entries=(TogglButton.$user.time_entries||[]).map(e=>({...e,pid:e.pid||null,tid:e.tid||null})),await Promise.all([db.setLocal(`${TogglButton.$user.id}-projects`,o),db.setLocal(`${TogglButton.$user.id}-clients`,s)]),TogglButton.$user.projectMap=o,TogglButton.$user.clientMap=s,TogglButton.$user.clientNameMap=c,TogglButton.$user.projectTaskList=l,!TogglButton.$user.default_wid){const e=TogglButton.$user.workspaces[0];TogglButton.$user.default_wid=e.id}localStorage.setItem("userToken",n.data.api_token),t({success:200===e.status}),TogglButton.setBrowserActionBadge(),TogglButton.setupSocket(),TogglButton.updateBugsnag(),TogglButton.handleQueue(),TogglButton.setCanSeeBillable(),ga.reportOs()}else 403!==e.status&&a.a.notify(new Error(`Fetch user failed ${e.status}`),t=>{t.addMetadata("general",{status:e.status,responseText:e.responseText})}),TogglButton.setBrowserActionBadge(),t({success:!1,type:"login",error:`Fetch user failed ${e.status}`})}catch(e){Object(i.f)(e)}},onError:function(e){TogglButton.setBrowserActionBadge(),t({success:!1,type:"login",error:"Connectivity error"})}})})},handleQueue:function(){for(;TogglButton.queue.length;)TogglButton.queue.shift()()},updateBugsnag:function(){a.a.setUser({id:TogglButton.$user.id})},setCanSeeBillable:function(){let e,t,n=!1;for(t in TogglButton.$user.workspaces)if(TogglButton.$user.workspaces.hasOwnProperty(t)&&(e=TogglButton.$user.workspaces[t]).premium){n=!0;break}TogglButton.canSeeBillable=n},setupSocket:function(){if(TogglButton.websocket.socket&&TogglButton.websocket.socket.readyState!==WebSocket.CLOSED)return;try{TogglButton.websocket.socket=new WebSocket(Object.assign(new URL("/stream","https://track.toggl.com/api"),{protocol:"wss:"}).href)}catch(e){return a.a.notify(e,e=>{e.context="websocket"}),void TogglButton.retryWebsocketConnection()}const e={type:"authenticate",api_token:TogglButton.$user.api_token},t=JSON.stringify({type:"pong"});TogglButton.websocket.socket.onopen=function(){TogglButton.resetWebsocketRetryCount();const t=JSON.stringify(e);try{return TogglButton.websocket.socket.send(t)}catch(e){0,a.a.notify(e,e=>{e.context="websocket"})}},TogglButton.websocket.socket.onerror=function(e){return console.error("Websocket error: ",e)},TogglButton.websocket.socket.onclose=function(){a.a.leaveBreadcrumb("Websocket connection closed"),TogglButton.retryWebsocketConnection()},TogglButton.websocket.socket.onmessage=function(e){if(!e.data)return;const n=JSON.parse(e.data);if(null!==n.model)"time_entry"===n.model&&TogglButton.updateCurrentEntry(n);else if(null!==TogglButton.websocket.socket)try{TogglButton.websocket.socket.send(t)}catch(e){0,a.a.notify(e,e=>{e.context="websocket"})}}},retryWebsocketConnection:function(){const e=(t=TogglButton.websocket.retryCount,Math.min(x*Math.pow(2,t)+P(),E));var t;setTimeout(()=>{TogglButton.websocket.retryCount++,TogglButton.setupSocket(),a.a.leaveBreadcrumb(`Websocket reconnection attempt ${TogglButton.websocket.retryCount}`)},1e3*e)},resetWebsocketRetryCount:function(){TogglButton.websocket.retryCount=0},updateTriggers:function(e){const t=!!TogglButton.localEntry&&!!e&&TogglButton.localEntry.id===e.id;TogglButton.$curEntry=e,e?(t&&(TogglButton.checkPomodoroAlarm(e),clearTimeout(TogglButton.$nannyTimer),TogglButton.$nannyTimer=null),t||(r.a.browserAction.setIcon({path:{19:"images/icon-19.png",38:"images/icon-38.png"}}),TogglButton.clearPomdoroAnimation())):(TogglButton.clearPomdoroAnimation(),r.a.browserAction.setIcon({path:{19:"images/inactive-19.png",38:"images/inactive-38.png"}})),TogglButton.startCheckingDayEnd(!!e),TogglButton.toggleCheckingUserState(!!e),TogglButton.setBrowserAction(e)},updateCurrentEntry:async function(e){let t=e.data;const n=await db.get("rememberProjectPer");if(n){const e=await db.getDefaultProject();t.pid===e?null!==e&&db.setDefaultProject(null,"service"===n?TogglButton.$curService:TogglButton.$curURL):t.pid!==e&&db.setDefaultProject(t.pid,"service"===n?TogglButton.$curService:TogglButton.$curURL)}"INSERT"===e.action?TogglButton.updateTriggers(t):"UPDATE"!==e.action||null!==TogglButton.$curEntry&&t.id!==TogglButton.$curEntry.id?"delete"===e.action&&null!==TogglButton.$curEntry&&TogglButton.$curEntry.id===t.id&&(TogglButton.$latestStoppedEntry=t,TogglButton.updateTriggers(null)):(t.duration>=0&&(TogglButton.$latestStoppedEntry=t,TogglButton.updateEntriesDb(),t=null),TogglButton.updateTriggers(t))},updateEntriesDb:function(){let e,t,n=!1;if(TogglButton.$user){if(TogglButton.$latestStoppedEntry&&(TogglButton.$latestStoppedEntry.pid=TogglButton.$latestStoppedEntry.pid||TogglButton.$latestStoppedEntry.project_id||null,TogglButton.$latestStoppedEntry.tid=TogglButton.$latestStoppedEntry.tid||TogglButton.$latestStoppedEntry.task_id||null),TogglButton.$user.time_entries&&Object.keys(TogglButton.$user.time_entries).length)for(e in TogglButton.$user.time_entries)TogglButton.$user.time_entries.hasOwnProperty(e)&&(t=TogglButton.$user.time_entries[e]).id===TogglButton.$latestStoppedEntry.id&&(TogglButton.$user.time_entries[e]=TogglButton.$latestStoppedEntry,n=!0);else TogglButton.$user.time_entries=[];n||TogglButton.$user.time_entries.push(TogglButton.$latestStoppedEntry)}else TogglButton.fetchUser()},findProjectByName:function(e){let t,n;const o=[].concat(e);let r,a;for(a=0;a<o.length;a++)for(t in n=o[a],TogglButton.$user.projectMap)if(TogglButton.$user.projectMap.hasOwnProperty(t)&&TogglButton.$user.projectMap[t].name===n&&(r=TogglButton.$user.projectMap[t]).wid===TogglButton.$user.default_wid)return r;return r},findProjectByPid:function(e){let t;for(t in TogglButton.$user.projectMap)if(TogglButton.$user.projectMap.hasOwnProperty(t)&&TogglButton.$user.projectMap[t].id===e)return TogglButton.$user.projectMap[t]},createTimeEntry:async function(e){const t=e.type,n=e.container,o=new Date;let r;const a=await db.get("rememberProjectPer"),s=await db.get("enableAutoTagging");let c,l,u="";if(TogglButton.$curService=(e||{}).service,TogglButton.$curURL=(e||{}).url,r=a?await db.getDefaultProject("service"===a?TogglButton.$curService:TogglButton.$curURL):await db.getDefaultProject(),!e)return new Promise(e=>{e({success:!1,type:"New Entry"})});const g=s||"list-continue"===t||"resume"===t||"idle-detection-notification-continue"===t;return c={start:o.toISOString(),stop:null,duration:-parseInt(o.getTime()/1e3,10),description:e.description||"",pid:e.pid||e.projectId||null,tid:e.tid||null,wid:e.wid||TogglButton.$user.default_wid,tags:g&&e.tags||null,billable:e.billable||!1,created_with:e.createdWith||TogglButton.$fullVersion},null===e.projectName||c.pid||(l=TogglButton.findProjectByName(e.projectName),c.pid=l&&l.id||null,c.billable=l&&l.billable,c.wid=l&&l.wid||c.wid),!c.pid&&r&&(l=TogglButton.findProjectByPid(r),c.pid=l&&l.id||null,c.billable=l&&l.billable,c.wid=l&&l.wid||c.wid),new Promise(t=>{TogglButton.ajax("/time_entries",{method:"POST",payload:c,baseUrl:TogglButton.$ApiV9Url,onLoad:async function(o){const r=!!TogglButton.$user&&!!TogglButton.$user.projectTaskList,a=200===o.status;try{if(a?(c=JSON.parse(o.responseText),TogglButton.localEntry=c,TogglButton.updateTriggers(c),ga.reportEvent(e.type,e.service),db.bumpTrackedCount()):u=o.responseText,e.respond){const e=await db.get("showPostPopup"),o=await db.get("darkMode");t({success:a,type:"New Entry",entry:c,showPostPopup:e,html:TogglButton.getEditForm(),container:n,hasTasks:r,darkMode:o,error:u})}else t({success:!0})}catch(e){Object(i.f)(e)}},onError:function(e){t({success:!1,type:"New Entry"})}})})},latestEntry:function(){const e=TogglButton.$user.time_entries||[null];return e[e.length-1]},checkPomodoroAlarm:function(e){const t=new Date-new Date(e.start);TogglButton.triggerPomodoroAlarm(t)},triggerPomodoroAlarm:async function(e){null!==TogglButton.pomodoroAlarm&&(clearTimeout(TogglButton.pomodoroAlarm),TogglButton.pomodoroAlarm=null,clearInterval(TogglButton.pomodoroProgressTimer));const t=await db.get("pomodoroModeEnabled"),n=await db.get("pomodoroInterval");if(t){let t;TogglButton.startTicker(),TogglButton.pomodoroFocusMode=await db.get("pomodoroFocusMode");const o=6e4*parseInt(n,10);if(TogglButton.pomodoroInterval=o,e>o)clearTimeout(TogglButton.pomodoroAlarm),TogglButton.pomodoroAlarm=null,clearInterval(TogglButton.pomodoroProgressTimer),t=TogglButton.updatePomodoroProgress(0,0,0);else{const r=o-e||o,a=120,i=(o-r)/o;TogglButton.pomodoroInterval=n,t=TogglButton.updatePomodoroProgress(r,a,i),TogglButton.pomodoroAlarm=setTimeout(TogglButton.pomodoroAlarmStop,r),TogglButton.pomodoroProgressTimer=setInterval(t,o/a)}r.a.runtime.sendMessage({type:"bg/render-entries-list"}).catch(e=>{throw new Error(e)}),t()}},updatePomodoroProgress:function(e,t,n){let o=0,a=0;return async function(){let i,s;const c={19:"images/icon-19.png",38:"images/icon-38.png"},l={},u=2*Math.PI,g=.5*Math.PI;let d=0;const m=function(e){return function(){const t=document.createElement("canvas").getContext("2d");t.drawImage(this,0,0),t.beginPath(),t.strokeStyle="#ffffff",t.lineCap="butt",t.closePath(),t.fill(),t.lineWidth=2.5,t.beginPath(),t.arc(.5*this.naturalWidth,.5*this.naturalHeight,.5*this.naturalWidth-1,-1*g,u*o-g,!1),t.stroke(),l[e]=t.getImageData(0,0,this.naturalWidth,this.naturalHeight),2===++d&&r.a.browserAction.setIcon({imageData:l})}};if(o=(a+=e/t)/e+n,await db.get("pomodoroModeEnabled"))for(i in c)c.hasOwnProperty(i)&&((s=new Image).onload=m(i),s.src=c[i]);else clearInterval(TogglButton.pomodoroProgressTimer),r.a.browserAction.setIcon({path:c})}},ajax:function(e,t){const n=new XMLHttpRequest,o=t.method||"GET",r=(t.baseUrl||TogglButton.$ApiV8Url)+e,a=t.token||TogglButton.$user&&TogglButton.$user.api_token||localStorage.getItem("userToken"),i=t.credentials||null;n.open(o,r,!0),n.setRequestHeader("IsTogglButton","true"),r.match(TogglButton.$ApiUrl)&&(a?n.setRequestHeader("Authorization","Basic "+btoa(a+":api_token")):i&&n.setRequestHeader("Authorization","Basic "+btoa(i.username+":"+i.password))),t.onError&&n.addEventListener("error",function(){t.onError(n)}),t.onLoad&&n.addEventListener("load",function(){t.onLoad(n)}),t.mime&&n.overrideMimeType("application/json"),n.send(JSON.stringify(t.payload))},resetPomodoroProgress:function(e){TogglButton.clearPomdoroAnimation(),TogglButton.updateTriggers(e)},clearPomdoroAnimation:function(){TogglButton.stopTicker(),clearTimeout(TogglButton.pomodoroAlarm),TogglButton.pomodoroAlarm=null,clearInterval(TogglButton.pomodoroProgressTimer),TogglButton.pomodoroProgressTimer=null},stopTimeEntryPomodoro:function(e,t,n){return new Promise(async t=>{const n=await db.get("pomodoroInterval"),o=60*parseInt(n,10);if(!TogglButton.$curEntry)return void t();const a={duration:o};TogglButton.ajax(`/time_entries/${TogglButton.$curEntry.id}`,{method:"PUT",payload:a,baseUrl:TogglButton.$ApiV9Url,onLoad:function(n){200===n.status&&(TogglButton.$latestStoppedEntry=JSON.parse(n.responseText),TogglButton.updateEntriesDb(),TogglButton.resetPomodoroProgress(null),TogglButton.setNannyTimer(),ga.reportEvent(e.type,e.service),t({success:!0,type:"Stop"}),r.a.tabs.query({active:!0,currentWindow:!0}).then(O(function(e){r.a.tabs.sendMessage(e[0].id,{type:"stop-entry",user:TogglButton.$user}).catch(e=>{if("Could not establish connection. Receiving end does not exist."!==e.message)throw new Error(e)})}))),400===n.status&&n.response&&n.response.includes("please add a")&&TogglButton.showUnmetConstraintsNotification(n.response)},onError:function(e){t({success:!1,type:"Update"})}})})},stopTimeEntry:function(e){return new Promise(t=>{if(!TogglButton.$curEntry)return void t();const n=e.stopDate||new Date,o=new Date(1e3*-TogglButton.$curEntry.duration),a={stop:n.toISOString(),duration:Math.floor((n-o)/1e3)};TogglButton.ajax(`/time_entries/${TogglButton.$curEntry.id}`,{method:"PUT",baseUrl:TogglButton.$ApiV9Url,payload:a,onLoad:function(n){200===n.status&&(TogglButton.$latestStoppedEntry=JSON.parse(n.responseText),TogglButton.updateEntriesDb(),TogglButton.resetPomodoroProgress(null),TogglButton.setNannyTimer(),ga.reportEvent(e.type,e.service),r.a.tabs.query({active:!0,currentWindow:!0}).then(O(function(e){r.a.tabs.sendMessage(e[0].id,{type:"stop-entry",user:TogglButton.$user}).catch(e=>{if("Could not establish connection. Receiving end does not exist."!==e.message)throw new Error(e)})})),t({success:!0,type:"Stop"})),400===n.status&&n.response&&n.response.includes("please add a")&&TogglButton.showUnmetConstraintsNotification(n.response)},onError:function(e){t({success:!1,type:"Stop"})}})})},showUnmetConstraintsNotification:function(e){const t={type:"basic",iconUrl:"images/icon-128.png",title:"Toggl Button",message:e,priority:2};TogglButton.hideNotification("unmet-constraints"),r.a.notifications.create("unmet-constraints",t)},pomodoroStopTimeTracking:async function(){await db.get("pomodoroStopTimeTrackingWhenTimerEnds")?TogglButton.stopTimeEntryPomodoro({type:"pomodoro-stop",service:"dropdown"}):TogglButton.resetPomodoroProgress(TogglButton.$curEntry)},pomodoroAlarmStop:async function(){if(!await db.get("pomodoroModeEnabled"))return;let e,t="pomodoro-time-is-up";const n=TogglButton.$curEntry&&TogglButton.$curEntry.description?TogglButton.$curEntry.description:"";let o=n.slice(0,30);o.length<n.length&&(o+=".. ");let a=`Continue Latest ${n&&`(${o})`}`,i="Start New";TogglButton.pomodoroStopTimeTracking(),await db.get("pomodoroStopTimeTrackingWhenTimerEnds")||(t="pomodoro-time-is-up-dont-stop",a="Stop timer",i="Stop and Start New");const s={type:"basic",iconUrl:"images/icon-128.png",title:"Toggl Button - Pomodoro Timer",message:"Time is up! Take a break",priority:2};if(j){const e=await db.get("pomodoroStopTimeTrackingWhenTimerEnds");s.message+=e?". Click to continue tracking.":". Click to stop tracking."}else s.requireInteraction=!0,s.buttons=[{title:a},{title:i}];if(TogglButton.hideNotification(t),r.a.notifications.create(t,s),await db.get("pomodoroSoundEnabled")){const t=await db.get("pomodoroSoundFile"),n=await db.get("pomodoroSoundVolume");(e=new Audio).src=t,e.volume=n,e.play()}},updateTimeEntry:function(e){let t,n,o="";const r=TogglButton.$curEntry&&TogglButton.$curEntry.id===e.id;return new Promise(function(a,s){t={description:e.description,pid:e.pid||null,tags:e.tags,tid:e.tid||null,billable:e.billable,wid:e.wid||TogglButton.$curEntry.wid},e.id?t.id=e.id:t.id=TogglButton.$curEntry.id,t.pid&&(n=TogglButton.findProjectByPid(parseInt(t.pid,10)),t.wid=n&&n.wid),e.start&&(t.start=e.start),r||(t.stop=e.stop),e.duration&&(t.duration=e.duration),TogglButton.ajax(`/time_entries/${t.id}`,{method:"PUT",payload:t,baseUrl:TogglButton.$ApiV9Url,onLoad:function(n){const s=200===n.status;try{if(s)if(t=JSON.parse(n.responseText),r)TogglButton.$curEntry=t,TogglButton.setBrowserAction(t);else{const n=TogglButton.$user.time_entries.findIndex(t=>t.id===e.id);n&&(TogglButton.$user.time_entries[n]=t)}else o=n.responseText;e.respond?a({success:s,type:"Update",error:o}):a(),ga.reportEvent(e.type,e.service)}catch(e){Object(i.f)(e),a({success:!1,type:"Update"})}},onError:function(e){a({success:!1,type:"Update"})}})})},deleteTimeEntry:function(e){return new Promise(function(t,n){TogglButton.ajax(`/time_entries/${e.id}`,{method:"DELETE",baseUrl:TogglButton.$ApiV9Url,onLoad:function(n){const o=200===n.status;if(o){const t=parseInt(e.id,10);TogglButton.$curEntry&&TogglButton.$curEntry.id===t&&(TogglButton.$curEntry=null,TogglButton.updateTriggers(null));const n=TogglButton.$user.time_entries.filter(function(e){return e.id!==t});TogglButton.$user.time_entries=n}try{t({success:o,type:"delete",id:e.id}),ga.reportEvent(e.type,e.service)}catch(e){Object(i.f)(e),t({success:!1,type:"delete"})}},onError:function(e){t({success:!1,type:"delete"})}})})},setBrowserActionBadge:function(){let e="";TogglButton.$user||(e="x",TogglButton.setBrowserAction(null)),r.a.browserAction.setBadgeText({text:e})},setBrowserAction:function(e){let t={19:"images/inactive-19.png",38:"images/inactive-38.png"},n=r.a.runtime.getManifest().browser_action.default_title;TogglButton.updatePopup(),TogglButton.pomodoroProgressTimer||(e&&(t={19:"images/icon-16.png",38:"images/icon-38.png"},n=e.description&&e.description.length>0?e.description+" - Toggl":"(no description) - Toggl",r.a.browserAction.setBadgeText({text:""})),r.a.browserAction.setTitle({title:n}),r.a.browserAction.setIcon({path:t}))},setupToken:function(e){try{const t=JSON.parse(e),{api_token:n}=t.data;localStorage.setItem("userToken",n)}catch(t){a.a.notify(new Error("Login token-parse failed"),t=>{t.addMetadata({general:{response:e}})})}},loginUser:function(e){let t;return new Promise((n,o)=>{TogglButton.ajax("/sessions",{method:"POST",onLoad:function(e){200===e.status?(TogglButton.setupToken(e.responseText),TogglButton.fetchUser().then(e=>{TogglButton.refreshPage(),n(e)}).catch(o)):(403===e.status&&(t="Wrong Email or Password!"),a.a.notify(new Error(`Login failed (${e.status})`),t=>{t.addMetadata({general:{status:e.status,responseText:e.responseText}})}),n({success:!1,error:t}))},onError:function(e){n({success:!1,type:"login"})},credentials:{username:e.username,password:e.password}})})},logoutUser:function(){return new Promise(e=>{TogglButton.ajax("/sessions?created_with="+TogglButton.$fullVersion,{method:"DELETE",onLoad:async function(t){TogglButton.$user=null,TogglButton.updateTriggers(null),await db.clearLocal(),localStorage.removeItem("userToken"),e({success:200===t.status,xhr:t}),200===t.status&&TogglButton.setBrowserActionBadge(),TogglButton.refreshPageLogout()},onError:function(t){e({success:!1,type:"logout"})}})})},getEditForm:function(){return TogglButton.$user?TogglButton.$editForm.replace("{projects}",TogglButton.fillProjects()).replace("{tags}",TogglButton.fillTags()).replace("{billable}",TogglButton.setupBillable()):""},setupBillable:function(){return TogglButton.canSeeBillable?'" ':'no-billable" tabindex="-1'},fillProjects:function(){let e='<p class="project-row" data-pid="0"><span class="tb-project-bullet tb-project-color tb-no-color">No project</span></p>';const t=TogglButton.$user.projectMap,n=TogglButton.$user.clientMap,o=TogglButton.$user.clientNameMap,r=TogglButton.$user.workspaces.length>1?"":" hide",a={};let s,c,l=null,u=null;const g=[];let d,m=0;try{for(l in o)o.hasOwnProperty(l)&&g.push(l.toLowerCase());for(g.sort(),TogglButton.$user.workspaces.forEach(function(e,t){a[e.id]={},a[e.id][0]='<ul class="ws-list" data-wid="'+e.id+'" title="'+Object(i.a)(e.name)+'"><li class="ws-row'+r+'" title="'+Object(i.a)(e.name)+'">'+Object(i.a)(e.name)+'</li><ul class="client-list" data-cid="0">'}),d=0;d<g.length;d++)s=o[g[d]],a[s.wid][s.name+s.id]='<ul class="client-list" data-cid="'+s.id+'"><li class="client-row" title="'+Object(i.a)(s.name)+'">'+Object(i.a)(s.name)+"</li>";for(l in t)t.hasOwnProperty(l)&&(m=(c=t[l]).cid&&n[c.cid]?n[c.cid].name+c.cid:0,a[c.wid][m]+=TogglButton.generateProjectItem(c));for(l in a)if(a.hasOwnProperty(l)){for(u in a[l])a[l].hasOwnProperty(u)&&-1!==a[l][u].indexOf("project-row")&&(e+=a[l][u]+"</ul>");e+="</ul>"}}catch(e){Object(i.f)(e)}return e},generateProjectItem:function(e){const t=TogglButton.$user.projectTaskList?TogglButton.$user.projectTaskList[e.id]:null;let n,o;const r=t?"has-tasks":"";let a='<li class="project-row" title="'+Object(i.a)(e.name)+'" data-pid="'+e.id+'"><span class="tb-project-bullet tb-project-color" style="color: '+e.hex_color+'"><span class="item-name '+r+'" title="'+Object(i.a)(e.name)+'">'+Object(i.a)(e.name)+"</span></span>";if(t){for(o=t.length+" task",t.length>1&&(o+="s"),a+='<span class="task-count" title="'+o+'">'+o+"</span>",a+='<ul class="task-list">',n=0;n<t.length;n++)a+='<li class="task-item" data-tid="'+t[n].id+'" title="'+Object(i.a)(t[n].name)+'">'+Object(i.a)(t[n].name)+"</li>";a+="</ul>"}return a+"</li>"},fillTags:function(){return`\n      <ul class="tag-list">\n        ${(TogglButton.$user.tags||[]).sort((e,t)=>e.name.localeCompare(t.name)).map(e=>`\n        <li\n          class="tag-item"\n          data-wid="${Object(i.a)(e.wid)}"\n          title="${Object(i.a)(e.name)}"\n        >\n        ${Object(i.a)(e.name)}\n        </li>\n      `.trim()).join("\n")}\n      </ul>\n    `.trim()},refreshPage:function(){let e;r.a.tabs.query({active:!0,currentWindow:!0}).then(O(async function(t){(e=await TogglButton.extractDomain(t[0].url)).file&&r.a.tabs.reload(t[0].id)}))},refreshPageLogout:function(){r.a.tabs.query({active:!0,currentWindow:!0}).then(O(function(e){r.a.tabs.executeScript(e[0].id,{code:"!!document.querySelector('.toggl-button')"}).then(function(t){t&&t[0]&&r.a.tabs.reload(e[0].id)})}))},startCheckingUserState:async function(){const e=await db.get("idleDetectionEnabled");!TogglButton.$checkingState&&e&&TogglButton.$curEntry&&(TogglButton.$checkingUserState=setTimeout(function(){r.a.idle.queryState(15).then(TogglButton.onUserState)},2e3))},stopCheckingUserState:function(){clearTimeout(TogglButton.$checkingUserState),TogglButton.$checkingUserState=!1},toggleCheckingUserState:function(e){e?TogglButton.startCheckingUserState():TogglButton.stopCheckingUserState()},timeStringFromSeconds:function(e){let t=0,n=0,o=0;return n=Math.floor(e/60),t=e%60,o=Math.floor(n/60),n%=60,o>0?o+"h "+n+"m":n>0?n+"m "+t+"s":t+"s"},showIdleDetectionNotification:function(e){const t={type:"basic",iconUrl:"images/icon-128.png",title:"Toggl Button",message:"You've been idle for "+TogglButton.timeStringFromSeconds(e)+' while tracking "'+(TogglButton.$curEntry.description||"(no description)")+'"'};j?t.message+=". Click to discard time.":t.buttons=[{title:"Discard idle time"},{title:"Discard idle and continue"}],TogglButton.$idleNotificationDiscardSince=TogglButton.$lastWork.date,TogglButton.hideNotification("idle-detection"),r.a.notifications.create("idle-detection",t)},updateLastWork:e=>{TogglButton.$lastWork={id:TogglButton.$curEntry.id,date:e||new Date}},onUserState:function(e){TogglButton.$userState=e;const t=new Date,n=Math.floor((t-TogglButton.$lastWork.date)/1e3);TogglButton.$user&&(e=>"locked"!==e)(e)&&TogglButton.$curEntry&&(TogglButton.$lastWork.id===TogglButton.$curEntry.id&&((e,t)=>"active"===e&&t>300||"idle"===e&&t>0&&t%300==0)(e,n)&&(TogglButton.showIdleDetectionNotification(n),TogglButton.updateLastWork(TogglButton.$lastWork.date)),"active"===e&&TogglButton.updateLastWork()),clearTimeout(TogglButton.$checkingUserState),TogglButton.$checkingUserState=null,TogglButton.startCheckingUserState()},checkState:function(){r.a.idle.queryState(15).then(TogglButton.checkActivity)},checkActivity:async function(e){let t,n="Open toggl.com";clearTimeout(TogglButton.$nannyTimer),TogglButton.$nannyTimer=null,TogglButton.$latestStoppedEntry&&TogglButton.$latestStoppedEntry.description&&(n="Continue ("+TogglButton.$latestStoppedEntry.description+")");const o=await db.get("nannyCheckEnabled"),a=await TogglButton.isDuringWorkHours();TogglButton.$user&&"active"===e&&o&&a&&null===TogglButton.$curEntry&&(t={type:"basic",iconUrl:"images/icon-128.png",title:"Toggl Button",message:"Don't forget to track your time!"},j?t.message+=" Click to start timer.":t.buttons=[{title:"Start timer"},{title:n}],r.a.notifications.create("remind-to-track-time",t))},startCheckingDayEnd:function(e){clearInterval(TogglButton.checkingWorkdayEnd),e&&(TogglButton.checkingWorkdayEnd=setInterval(TogglButton.checkWorkDayEnd,3e4))},checkWorkDayEnd:async function(){if(!TogglButton.$curEntry)return;const e=await db.get("stopAtDayEnd"),t=await TogglButton.workdayEnded();if(TogglButton.$user&&e&&TogglButton.$curEntry&&t){let e="Continue";TogglButton.$curEntry.description?e+=" ("+TogglButton.$curEntry.description+")":e+=" latest";const t={type:"basic",iconUrl:"images/icon-128.png",title:"Toggl Button",message:"Your workday is over, running entry has been stopped"};j?t.message+=". Click to continue latest.":t.buttons=[{title:e}],TogglButton.stopTimeEntry(TogglButton.$curEntry),r.a.notifications.create("workday-ended-notification",t)}},workdayEnded:async function(){if(!TogglButton.$curEntry)return!1;const e=new Date(TogglButton.$curEntry.start),t=new Date,n=new Date,o=(await db.get("dayEndTime")).split(":");return n.setHours(o[0]),n.setMinutes(o[1]),n.setSeconds(0),t>=n&&n>e},notificationBtnClick:function(e,t){let n="dropdown-pomodoro",o=TogglButton.$curEntry,a="start_new",i="reminder";"remind-to-track-time"===e?(n="dropdown-reminder",0===t?TogglButton.createTimeEntry({type:"timeEntry",service:n}):(o=TogglButton.$latestStoppedEntry)&&o.description?(o.type="timeEntry",o.service=n,TogglButton.createTimeEntry(o),a="continue"):(r.a.tabs.create({url:"https://toggl.com/app/"}),a="go_to_web")):"idle-detection"===e?(0!==t&&1!==t||(a="discard",TogglButton.stopTimeEntry({stopDate:TogglButton.$idleNotificationDiscardSince,type:"idle-detection-notification"}).then(()=>{1===t&&(o.type="idle-detection-notification-continue",TogglButton.createTimeEntry(o),a="discard_continue")})),i="idle"):"pomodoro-time-is-up"===e?(0===t?((o=TogglButton.$latestStoppedEntry)?(o.type="timeEntry",o.service=n):o={type:"timeEntry",service:n},TogglButton.createTimeEntry(o),a="continue"):TogglButton.createTimeEntry({type:"timeEntry",service:n}),i="pomodoro"):"workday-ended-notification"===e?(0===t&&((o=TogglButton.$latestStoppedEntry)?(o.type="timeEntry",o.service=n):o={type:"timeEntry",service:n},TogglButton.createTimeEntry(o),a="continue"),i="workday-end"):"pomodoro-time-is-up-dont-stop"===e&&(0===t?TogglButton.stopTimeEntry(TogglButton.$curEntry):TogglButton.createTimeEntry({type:"timeEntry",service:n}),i="pomodoro"),j||TogglButton.onNotificationClicked(e),ga.reportEvent(i,a)},isDuringWorkHours:async function(){try{const e=new Date,t=(await db.get("nannyFromTo")).split("-");if(6===e.getDay()||0===e.getDay())return!1;const n=t[0].split(":"),o=t[1].split(":"),r=new Date;r.setHours(n[0]),r.setMinutes(n[1]);const i=new Date;return i.setHours(o[0]),i.setMinutes(o[1]),e>r&&e<=i}catch(e){return a.a.notify(e),!1}},setNannyTimer:async function(){if(null===TogglButton.$nannyTimer&&null===TogglButton.$curEntry){TogglButton.hideNotification("remind-to-track-time");const e=await db.get("nannyInterval");TogglButton.$nannyTimer=setTimeout(TogglButton.checkState,e)}},onNotificationClicked:function(e){j&&TogglButton.notificationBtnClick(e,0),"remind-to-track-time"===e?TogglButton.setNannyTimer():TogglButton.hideNotification(e)},onNotificationClosed:function(e){"remind-to-track-time"===e?TogglButton.setNannyTimer():TogglButton.hideNotification(e)},hideNotification:function(e){r.a.notifications.clear(e)},checkDailyUpdate:function(){const e=new Date,t=e.getDate()+"-"+e.getMonth()+"-"+e.getFullYear();null!==TogglButton.$lastSyncDate&&TogglButton.$lastSyncDate===t||(TogglButton.fetchUser(),TogglButton.$lastSyncDate=t)},updatePopup:function(){const e=r.a.extension.getViews({type:"popup"});e&&e.length&&e[0].PopUp&&e[0].PopUp.showPage()},showRevokedWSView:function(){const e=r.a.extension.getViews({type:"popup"});if(e&&e.length&&e[0].PopUp){const t=e[0].PopUp;t.switchView(t.$revokedWorkspaceView)}},calculateSums:function(){const e=new Date;let t=0,n=0;const o=TogglButton.$user.time_entries||[];e.setHours(0),e.setMinutes(0),e.setSeconds(0);const r=new Date;r.setHours(0,0,0,0);const a=function(e){const t=TogglButton.$user.beginning_of_week,n=e.getDay(),o=e.getDate()-n+(t>n?t-7:t);return new Date(e.setDate(o))}(e);return o.forEach(function(e){new Date(e.start).getTime()>r.getTime()&&(e.duration<0?t+=(new Date-new Date(e.start))/1e3:t+=e.duration),new Date(e.start).getTime()>a.getTime()&&(e.duration<0?n+=(new Date-new Date(e.start))/1e3:n+=e.duration)}),{today:Object(i.g)(t),week:Object(i.g)(n)}},contextMenuClick:function(e,t){TogglButton.createTimeEntry({type:"timeEntry",service:"contextMenu",description:e.selectionText||t.title})},newMessage:function(e){return new Promise(async t=>{let n,o;try{if("toggle-popup"===e.type)db.set("showPostPopup",e.state);else if("toggle-nanny"===e.type)db.updateSetting("nannyCheckEnabled",e.state,db.togglButton.setNannyTimer);else if("toggle-nanny-from-to"===e.type){const t=await db.get("nannyCheckEnabled");db.updateSetting("nannyFromTo",e.state,db.togglButton.setNannyTimer,t)}else if("toggle-nanny-interval"===e.type){const t=await db.get("nannyCheckEnabled");db.updateSetting("nannyInterval",Math.max(e.state,1e3),db.togglButton.setNannyTimer,t)}else if("toggle-idle"===e.type)db.updateSetting("idleDetectionEnabled",e.state,db.togglButton.startCheckingUserState);else if("toggle-pomodoro"===e.type)db.set("pomodoroModeEnabled",e.state);else if("toggle-pomodoro-focus-mode"===e.type)db.set("pomodoroFocusMode",e.state);else if("toggle-pomodoro-sound"===e.type)db.set("pomodoroSoundEnabled",e.state);else if("toggle-pomodoro-interval"===e.type)db.updateSetting("pomodoroInterval",e.state);else if("toggle-pomodoro-stop-time"===e.type)db.set("pomodoroStopTimeTrackingWhenTimerEnds",e.state);else if("update-pomodoro-sound-volume"===e.type)db.set("pomodoroSoundVolume",e.state);else if("toggle-right-click-button"===e.type)db.updateSetting("showRightClickButton",e.state);else if("toggle-dark-mode"===e.type)db.updateSetting("darkMode",e.state);else if("toggle-start-automatically"===e.type)db.updateSetting("startAutomatically",e.state);else if("toggle-stop-automatically"===e.type)db.updateSetting("stopAutomatically",e.state);else if("toggle-stop-at-day-end"===e.type)db.updateSetting("stopAtDayEnd",e.state),db.togglButton.startCheckingDayEnd(e.state);else if("toggle-day-end-time"===e.type)db.updateSetting("dayEndTime",e.state);else if("change-default-project"===e.type)db.updateSetting(db.togglButton.$user.id+"-defaultProject",e.state);else if("change-remember-project-per"===e.type)db.updateSetting("rememberProjectPer",e.state),db.resetDefaultProjects();else if("update-send-usage-statistics"===e.type)db.updateSetting("sendUsageStatistics",e.state);else if("update-send-error-reports"===e.type)db.updateSetting("sendErrorReports",e.state);else if("update-enable-auto-tagging"===e.type)db.updateSetting("enableAutoTagging",e.state);else if("settings-reset"===e.type)TogglButton.logoutUser(),t();else if("activate"===e.type){TogglButton.checkDailyUpdate(),TogglButton.setBrowserActionBadge();const e=await db.getDefaultProject();t({success:null!==TogglButton.$user,user:TogglButton.$user,version:TogglButton.$fullVersion,defaults:{project:e}}),TogglButton.setNannyTimer()}else if("login"===e.type)TogglButton.loginUser(e).then(e=>{t(e)}).catch(()=>t(void 0));else if("logout"===e.type)TogglButton.logoutUser().then(t);else if("sync"===e.type){const n=await TogglButton.fetchUser();t(e.respond?n:void 0)}else"timeEntry"===e.type?TogglButton.createTimeEntry(e).then(e=>{TogglButton.hideNotification("remind-to-track-time"),t(e)}):"list-continue"===e.type?(TogglButton.createTimeEntry({...e.data,respond:e.respond,type:e.type}).then(t),TogglButton.hideNotification("remind-to-track-time")):"resume"===e.type?(TogglButton.createTimeEntry({...TogglButton.$latestStoppedEntry,type:"resume"}).then(t),TogglButton.hideNotification("remind-to-track-time")):"delete"===e.type?TogglButton.deleteTimeEntry(e).then(t):"update"===e.type?TogglButton.updateTimeEntry(e).then(t):"stop"===e.type?TogglButton.stopTimeEntry(e).then(t):"userToken"===e.type?TogglButton.$user||TogglButton.fetchUser(e.apiToken):"currentEntry"===e.type?t({currentEntry:TogglButton.$curEntry}):"error"===e.type?((n=new Error).stack=e.stack,n.message=e.stack.split("\n")[0],o=(o=e.stack.split("content/")[1])?o.split(".js")[0]:"Unknown","Content"===e.category?(n.name=`Content Error [${o}]`,a.a.notify(n)):Object(i.f)(n)):"options"===e.type?r.a.runtime.openOptionsPage():"create-workspace"===e.type?TogglButton.createWorkspace(e).then(t):t(void 0)}catch(e){0,Object(i.f)(e),t(void 0)}})},tabUpdated:async function(e,t,n){if(TogglButton.$user||""===n.url||Object(i.e)(n.url)){if("complete"===t.status&&-1===n.url.indexOf("chrome://")){const t=await TogglButton.extractDomain(n.url,!1),o={origins:t.origins};0,j?t.file&&TogglButton.checkLoadedScripts(e,t.file):r.a.permissions.contains(o).then(function(n){n&&t.file&&TogglButton.checkLoadedScripts(e,t.file)})}}else TogglButton.setBrowserActionBadge()},checkLoadedScripts:function(e,t){r.a.tabs.executeScript(e,{code:"(typeof togglbutton === 'undefined')"}).then(function(n){n&&n[0]&&TogglButton.loadFiles(e,t)}).catch(e=>{if("Missing host permission for the tab"!==e.message)throw e})},loadFiles:function(e,t){r.a.tabs.insertCSS(e,{file:"styles/style.css"}).then(function(){return r.a.tabs.insertCSS(e,{file:"styles/edit-form.css"})}).then(function(){return r.a.tabs.insertCSS(e,{file:"styles/autocomplete.css"})}),r.a.tabs.executeScript(e,{file:"scripts/common.js"}).then(function(){r.a.tabs.executeScript(e,{file:"scripts/content/"+t})})},extractDomain:async function(e,t=!0){if(t&&!TogglButton.$user)return!1;const n=new URL(e).hostname.replace("www.",""),o=await db.getOriginFileName(n);return!!n&&{file:o,origins:["*://"+n+"/*"]}},toggleRightClickButton:function(e){r.a.contextMenus&&(e?(r.a.contextMenus.create({title:"Start timer",contexts:["page"],onclick:TogglButton.contextMenuClick}),r.a.contextMenus.create({title:"Start timer with description '%s'",contexts:["selection"],onclick:TogglButton.contextMenuClick})):r.a.contextMenus.removeAll())},startAutomatically:async function(){const e=await db.get("startAutomatically");!TogglButton.$curEntry&&e&&TogglButton.$user&&(TogglButton.$latestStoppedEntry=TogglButton.latestEntry(),TogglButton.$latestStoppedEntry&&(TogglButton.createTimeEntry(TogglButton.$latestStoppedEntry),TogglButton.hideNotification("remind-to-track-time")))},stopTrackingOnBrowserClosed:async function(){$--,await db.get("stopAutomatically")&&0===$&&TogglButton.$curEntry&&TogglButton.stopTimeEntry(TogglButton.$curEntry)},hasWorkspaceBeenRevoked:function(e){return 0===e.length},createWorkspace:function(e){return new Promise((t,n)=>{const{workspace:o}=e,r={name:o,only_admins_see_team_dashboard:!1,ical_url:""};TogglButton.ajax("",{method:"POST",baseUrl:TogglButton.$ApiV9Url,payload:r,onLoad:e=>{t({type:"create-workspace",success:200===e.status})},onError:e=>{t({type:"create-workspace",success:!1})}})})},startTicker:async function(){if(await db.get("pomodoroTickerEnabled")){if(TogglButton.$ticker)return;const e=await db.get("pomodoroTickerFile"),t=await db.get("pomodoroTickerVolume"),n=await _.instance(e,+t,!0);TogglButton.$ticker=n,TogglButton.$ticker.play()}},stopTicker:async function(){TogglButton.$ticker&&await TogglButton.$ticker.stop(),TogglButton.$ticker=null}},r.a.webRequest.onBeforeSendHeaders.addListener(function(e){const t=e.requestHeaders;let n=!1,o=-1;return t.forEach(function(e,t){"user-agent"===e.name.toLowerCase()&&(o=t),"IsTogglButton"===e.name&&(n=!0)}),n&&-1!==o&&(t[o].value="TogglButton/1.71.0"),{requestHeaders:t}},{urls:["https://track.toggl.com/api/*"],types:["xmlhttprequest"]},["blocking","requestHeaders"]),window.db=new class{constructor(e){this.togglButton=e,this.loadAll()}async getOriginFileName(e){let t=await this.getOrigin(e);const n=await this.getAllOrigins();if(t&&(t.name||t.file))return y(t);if(t||(t=e),!n[t]){for(t=t.split(".");t.length>0&&!n[t.join(".")];)t.shift();if(!n[t=t.join(".")])return null}return y(n[t])}async getOrigin(e){return(await this.getAllOrigins())[e]||null}async setOrigin(e,t){const n=await this.getAllOrigins();n[e]=t,this.set(m,{...n,[e]:t})}async removeOrigin(e){const t=await this.getAllOrigins();delete t[e],this.set(m,t)}async getAllOrigins(){const e=await this.get(m);return{...s.a,...e}}async setDefaultProject(e,t){const n=this.togglButton.$user.id;let o=await this.get(n+"-defaultProjects",{});if(o||(o={}),!t)return this.set(n+"-defaultProject",e);o[t]=e,this.set(n+"-defaultProjects",o)}async getDefaultProject(e){if(!this.togglButton.$user)return 0;const t=this.togglButton.$user.id;let n=await this.get(t+"-defaultProjects");n||(n={});let o=await this.get(t+"-defaultProject");return o=parseInt(o||"0",10),e&&n&&n[e]||o}resetDefaultProjects(){this.togglButton.$user&&this.set(this.togglButton.$user.id+"-defaultProjects",{})}get(e,t){const n=t||p[e],o=void 0!==n,a=o?{[e]:n}:e;return h(e)?this.getLocal(e):r.a.storage.sync.get(a).then(t=>{let r=t[e];return o&&typeof r!=typeof n&&(r=n),b(r)})}getMultiple(e){return r.a.storage.sync.get(e).then(e=>Object.keys(e).reduce((t,n)=>Object.assign(t,{[n]:b(e[n])}),{}))}set(e,t){return h(e)?this.setLocal(e,t):r.a.storage.sync.set({[e]:t}).catch(t=>{console.error(`Error attempting to save ${e};`,t)}).finally(()=>{})}setLocal(e,t){return g(e,t)}setMultiple(e){return r.a.storage.sync.set(e).catch(t=>{console.error("Error attempting to save settings:",e,t)}).finally(()=>{})}async getLocal(e){const t=localStorage.getItem(e),n=await u(e);if(t&&localStorage.removeItem(e),t&&!n){const n=JSON.parse(t);return await this.setLocal(e,n),n}return n}clearLocal(){return d()}load(e,t){this.get(e).then(n=>{void 0===n&&(n=t),this.set(e,n)})}loadAll(){for(const e in p)p.hasOwnProperty(e)&&this.load(e,p[e])}updateSetting(e,t,n,o){const r=null!==o?o:t;this.set(e,t),r&&null!==n&&n()}async bumpTrackedCount(){const e=await this.get("timeEntriesTracked")||0;return this.set("timeEntriesTracked",e+1)}resetAllSettings(){const e={...p};return this.setMultiple(e).then(()=>{a.a.leaveBreadcrumb("Completed reset all settings")}).catch(e=>{a.a.notify(e),alert("Failed to reset settings. Please contact support@toggl.com for assistance or try re-installing the extension.")})}_migrateToStorageSync(){console.info("Migrating settings to v2"),a.a.leaveBreadcrumb("Attempting settings migration to v2");try{const e={...p},t=Object.keys(e).reduce((t,n)=>{const o=e[n];let r=localStorage.getItem(n);return r&&"boolean"==typeof o&&(r=JSON.parse(r)),t[n]=void 0===r?o:r,t},{});this.setMultiple(t).then(()=>{console.info("Succesully migrated old settings to v2"),a.a.leaveBreadcrumb("Migrated settings to v2")}).catch(e=>{console.error("Failed to migrate settings to v2; "),a.a.notify(e)})}catch(e){a.a.notify(e)}}}(TogglButton),window.ga=new class{constructor(e){this.db=e,this.load()}load(){B||(B=T()(),localStorage.setItem(w,B))}report(e,t){this.db.get("sendUsageStatistics").then(n=>{if(n){const n=new XMLHttpRequest,o="v=1&tid=UA-3215787-22&cid="+B+"&aip=1&ds=extension&t=event&ec="+e+"&ea="+t;n.open("POST","https://www.google-analytics.com/collect",!0),n.send(o)}})}reportEvent(e,t){this.report(e,e+"-"+t)}reportOs(){chrome.runtime.getPlatformInfo(e=>{this.report("os","os-"+e.os)})}reportSettings(e,t){}}(db),TogglButton.queue.push(TogglButton.startAutomatically),db.get("showRightClickButton").then(e=>{TogglButton.toggleRightClickButton(e)}),TogglButton.fetchUser(),TogglButton.setNannyTimer(),TogglButton.startCheckingUserState(),r.a.tabs.onUpdated.addListener(TogglButton.tabUpdated),r.a.alarms.onAlarm.addListener(TogglButton.pomodoroAlarmStop),db.get("stopAtDayEnd").then(TogglButton.startCheckingDayEnd),r.a.runtime.onMessage.addListener(TogglButton.newMessage),r.a.notifications.onClosed.addListener(TogglButton.onNotificationClosed),r.a.notifications.onClicked.addListener(TogglButton.onNotificationClicked),j||r.a.notifications.onButtonClicked.addListener(TogglButton.notificationBtnClick),r.a.windows.onCreated.addListener(TogglButton.startAutomatically),r.a.windows.getAll().then(function(e){$=e.length}),r.a.windows.onCreated.addListener(function(){$++}),r.a.windows.onRemoved.addListener(TogglButton.stopTrackingOnBrowserClosed),r.a.runtime.setUninstallURL("https://toggl.com/track/toggl-button-feedback/").catch(a.a.notify),window.onbeforeunload=function(){db.get("stopAutomatically").then(e=>{e&&TogglButton.$curEntry&&TogglButton.stopTimeEntry(TogglButton.$curEntry)})},r.a.runtime.onInstalled.addListener(function(e){if("install"===e.reason)TogglButton.$user||r.a.tabs.create({url:"html/login.html?source=install"});else if("update"===e.reason){console.info(`Updated from ${e.previousVersion} to 1.71.0.`);const[t,n]=e.previousVersion.split(".").map(Number),[o,r]="1.71.0".split(".").map(Number);1===t&&n<=22&&1===o&&r>=23&&db._migrateToStorageSync()}}),r.a.commands&&r.a.commands.onCommand.addListener(function(e){const t=TogglButton.$latestStoppedEntry||{type:"timeEntry",service:"keyboard"};"quick-start-stop-entry"===e&&(null!==TogglButton.$curEntry?TogglButton.stopTimeEntry(TogglButton.$curEntry):TogglButton.createTimeEntry(t))}),j||r.a.runtime.onMessageExternal.addListener(function(e,t,n){e&&e.message&&"version"===e.message&&n({version:"1.71.0"})})},6:function(e,t,n){"use strict";var o=n(13),r=n.n(o),a=n(3),i=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}c((o=o.apply(e,t||[])).next())})};function s(e){return e.stacktrace=e.stacktrace.map(function(e){return e.file=e.file.replace(/chrome-extension:/g,"chrome_extension:"),e.file=e.file.replace(/.*(moz-extension|chrome_extension|chrome-extension|file):\/\/.*\/scripts\/(.*)/gi,"togglbutton://scripts/$2"),e.file=e.file.replace(/\\/g,"/"),e}),e}const c=r.a.start({apiKey:"7419717b29de539ab0fbe35dcd7ca19d",appVersion:"1.71.0",releaseStage:"production",enabledReleaseStages:["production","development"],enabledBreadcrumbTypes:[],autoTrackSessions:!1,collectUserIp:!1,onError:function(e){return i(this,void 0,void 0,function*(){const t=a.extension.getBackgroundPage().db;if(!(yield t.get("sendErrorReports")))return!1;e.errors.map(s)})}});t.a=c},7:function(e,t,n){"use strict";n.d(t,"g",function(){return i}),n.d(t,"f",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"e",function(){return g}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return p});var o=n(6),r=function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,s)}c((o=o.apply(e,t||[])).next())})};const a=/^(\w+\.)?toggl\.(space|com)$/;function i(e){return Math.floor(e/3600)+"h "+Math.floor(e%3600/60)+"m"}function s(e){o.a.notify(e)}const c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function l(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}function u(e,t){return new URL(e).searchParams.get(t)}function g(e){try{return a.test(new URL(e).hostname)}catch(t){return o.a.notify(t,t=>{t.addMetadata("general",{url:e})}),!1}}function d(e=!1){return e?"https://addons.mozilla.org/en-US/firefox/addon/toggl-button-time-tracker/":"https://chrome.google.com/webstore/detail/toggl-button-productivity/oejgccbfbmkkpaidnkphaiaecficdnfn"}const m=30;function p(e){return r(this,void 0,void 0,function*(){return((yield e.get("timeEntriesTracked"))||0)>=m})}}});
//# sourceMappingURL=background.js.map